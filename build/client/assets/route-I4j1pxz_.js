import{r as a,j as o}from"./index-Bhhhx7h4.js";import{v as bt,B as St,w as yt,x as wt,y as Nt,z as Ze,D as xt,E as It,F as Et,G as $t,H as Ct,I as jt,J as Rt,h as Dt,L as Ot,M as At,N as We,C as qe,O as Ft,A as ee,T as Mt}from"./index-D9_lrgu6.js";import{u as Vt,U as kt}from"./index-BZJXnv9w.js";import{I as Tt}from"./index-CH34cjkL.js";import{a as Bt}from"./index-CeUTncnb.js";import{F as $,I as J}from"./index-IivWOIOz.js";import{P as ze}from"./index-ufwEpZVH.js";import{S as _t}from"./index-_rPoQdzz.js";import{s as M}from"./index-DaEJ5rVL.js";import{S as Lt}from"./index-ZOWeBnvh.js";import{B as te}from"./button-DgkAoqE2.js";import{R as Pt}from"./Pagination-DseZJcil.js";import{I as Ut,a as he,E as et,G as tt,h as O,ab as Gt,f as ge,b as Wt,Y as ye,d as X,e as rt,a0 as qt,ac as je,v as zt,T as Ht,g as Kt,m as Xt,a9 as Yt,r as Re,c as _,V as Jt,C as Qt,aa as Zt,j as er,D as tr,P as rr}from"./index-Bs36QOeU.js";import{L as He}from"./index-_u3NotOF.js";import{S as Ke}from"./index-Bjxa92qe.js";import{F as nr}from"./Table-CsxigRTB.js";import{M as be}from"./index-DUqLeMFK.js";import"./pickAttrs-r0RFaJBP.js";import"./collapse-BbEVqHco.js";import"./fade-2t19LHl3.js";import"./useBreakpoint-D4cuiZ4X.js";import"./responsiveObserver-Cz69L87y.js";import"./DeleteOutlined-Cz9l2vbV.js";import"./ExclamationCircleFilled-CiuxUjGk.js";import"./CloseOutlined-Dxm4jkL9.js";import"./SearchOutlined-CdaQ9A1C.js";import"./row-DHszOpHb.js";import"./LeftOutlined-R_ycQdco.js";import"./EllipsisOutlined-D3hTA01Z.js";import"./index-Hz7ZMWx3.js";import"./Dropdown-DVbf8yOU.js";import"./index-rKHRpc2j.js";import"./Sider-C8x-a6eO.js";import"./useClosable-CCDYGg12.js";var ar={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},ir=function(t,r){return a.createElement(Ut,he({},t,{ref:r,icon:ar}))},sr=a.forwardRef(ir);function Oe(){return typeof BigInt=="function"}function nt(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function ne(e){var t=e.trim(),r=t.startsWith("-");r&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var n=t||"0",i=n.split("."),s=i[0]||"0",S=i[1]||"0";s==="0"&&S==="0"&&(r=!1);var m=r?"-":"";return{negative:r,negativeStr:m,trimStr:n,integerStr:s,decimalStr:S,fullStr:"".concat(m).concat(n)}}function Fe(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function re(e){var t=String(e);if(Fe(e)){var r=Number(t.slice(t.indexOf("e-")+2)),n=t.match(/\.(\d+)/);return n!=null&&n[1]&&(r+=n[1].length),r}return t.includes(".")&&Me(t)?t.length-t.indexOf(".")-1:0}function we(e){var t=String(e);if(Fe(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Oe()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Oe()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(re(t))}return ne(t).fullStr}function Me(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var or=function(){function e(t){if(tt(this,e),O(this,"origin",""),O(this,"negative",void 0),O(this,"integer",void 0),O(this,"decimal",void 0),O(this,"decimalLen",void 0),O(this,"empty",void 0),O(this,"nan",void 0),nt(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var r=t;if(Fe(r)&&(r=Number(r)),r=typeof r=="string"?r:we(r),Me(r)){var n=ne(r);this.negative=n.negative;var i=n.trimStr.split(".");this.integer=BigInt(i[0]);var s=i[1]||"0";this.decimal=BigInt(s),this.decimalLen=s.length}else this.nan=!0}return et(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(r){var n="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(r,"0"));return BigInt(n)}},{key:"negate",value:function(){var r=new e(this.toString());return r.negative=!r.negative,r}},{key:"cal",value:function(r,n,i){var s=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),S=this.alignDecimal(s),m=r.alignDecimal(s),g=n(S,m).toString(),h=i(s),d=ne(g),N=d.negativeStr,I=d.trimStr,w="".concat(N).concat(I.padStart(h+1,"0"));return new e("".concat(w.slice(0,-h),".").concat(w.slice(-h)))}},{key:"add",value:function(r){if(this.isInvalidate())return new e(r);var n=new e(r);return n.isInvalidate()?this:this.cal(n,function(i,s){return i+s},function(i){return i})}},{key:"multi",value:function(r){var n=new e(r);return this.isInvalidate()||n.isInvalidate()?new e(NaN):this.cal(n,function(i,s){return i*s},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toString()===(r==null?void 0:r.toString())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":ne("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),lr=function(){function e(t){if(tt(this,e),O(this,"origin",""),O(this,"number",void 0),O(this,"empty",void 0),nt(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return et(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(r){if(this.isInvalidate())return new e(r);var n=Number(r);if(Number.isNaN(n))return this;var i=this.number+n;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var s=Math.max(re(this.number),re(n));return new e(i.toFixed(s))}},{key:"multi",value:function(r){var n=Number(r);if(this.isInvalidate()||Number.isNaN(n))return new e(NaN);var i=this.number*n;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var s=Math.max(re(this.number),re(n));return new e(i.toFixed(s))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toNumber()===(r==null?void 0:r.toNumber())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":we(this.number):this.origin}}]),e}();function W(e){return Oe()?new or(e):new lr(e)}function Se(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var i=ne(e),s=i.negativeStr,S=i.integerStr,m=i.decimalStr,g="".concat(t).concat(m),h="".concat(s).concat(S);if(r>=0){var d=Number(m[r]);if(d>=5&&!n){var N=W(e).add("".concat(s,"0.").concat("0".repeat(r)).concat(10-d));return Se(N.toString(),t,r,n)}return r===0?h:"".concat(h).concat(t).concat(m.padEnd(r,"0").slice(0,r))}return g===".0"?h:"".concat(h).concat(g)}function ur(e,t){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(n,i){if(t[i])return t[i];var s=n[i];return typeof s=="function"?s.bind(n):s}}):e}function cr(e,t){var r=a.useRef(null);function n(){try{var s=e.selectionStart,S=e.selectionEnd,m=e.value,g=m.substring(0,s),h=m.substring(S);r.current={start:s,end:S,value:m,beforeTxt:g,afterTxt:h}}catch{}}function i(){if(e&&r.current&&t)try{var s=e.value,S=r.current,m=S.beforeTxt,g=S.afterTxt,h=S.start,d=s.length;if(s.startsWith(m))d=m.length;else if(s.endsWith(g))d=s.length-r.current.afterTxt.length;else{var N=m[h-1],I=s.indexOf(N,h-1);I!==-1&&(d=I+1)}e.setSelectionRange(d,d)}catch(w){Gt(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(w.message))}}return[n,i]}var dr=function(){var t=a.useState(!1),r=ge(t,2),n=r[0],i=r[1];return Wt(function(){i(bt())},[]),n},fr=200,mr=600;function pr(e){var t=e.prefixCls,r=e.upNode,n=e.downNode,i=e.upDisabled,s=e.downDisabled,S=e.onStep,m=a.useRef(),g=a.useRef([]),h=a.useRef();h.current=S;var d=function(){clearTimeout(m.current)},N=function(R,c){R.preventDefault(),d(),h.current(c);function F(){h.current(c),m.current=setTimeout(F,fr)}m.current=setTimeout(F,mr)};a.useEffect(function(){return function(){d(),g.current.forEach(function(j){return ye.cancel(j)})}},[]);var I=dr();if(I)return null;var w="".concat(t,"-handler"),V=X(w,"".concat(w,"-up"),O({},"".concat(w,"-up-disabled"),i)),C=X(w,"".concat(w,"-down"),O({},"".concat(w,"-down-disabled"),s)),A=function(){return g.current.push(ye(d))},E={unselectable:"on",role:"button",onMouseUp:A,onMouseLeave:A};return a.createElement("div",{className:"".concat(w,"-wrap")},a.createElement("span",he({},E,{onMouseDown:function(R){N(R,!0)},"aria-label":"Increase Value","aria-disabled":i,className:V}),r||a.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),a.createElement("span",he({},E,{onMouseDown:function(R){N(R,!1)},"aria-label":"Decrease Value","aria-disabled":s,className:C}),n||a.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Xe(e){var t=typeof e=="number"?we(e):ne(e).fullStr,r=t.includes(".");return r?ne(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const gr=function(){var e=a.useRef(0),t=function(){ye.cancel(e.current)};return a.useEffect(function(){return t},[]),function(r){t(),e.current=ye(function(){r()})}};var hr=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],vr=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Ye=function(t,r){return t||r.isEmpty()?r.toString():r.toNumber()},Je=function(t){var r=W(t);return r.isInvalidate()?null:r},br=a.forwardRef(function(e,t){var r=e.prefixCls,n=e.className,i=e.style,s=e.min,S=e.max,m=e.step,g=m===void 0?1:m,h=e.defaultValue,d=e.value,N=e.disabled,I=e.readOnly,w=e.upHandler,V=e.downHandler,C=e.keyboard,A=e.changeOnWheel,E=A===void 0?!1:A,j=e.controls,R=j===void 0?!0:j;e.classNames;var c=e.stringMode,F=e.parser,B=e.formatter,v=e.precision,k=e.decimalSeparator,T=e.onChange,L=e.onInput,P=e.onPressEnter,U=e.onStep,G=e.changeOnBlur,Q=G===void 0?!0:G,ce=e.domRef,de=rt(e,hr),ae="".concat(r,"-input"),q=a.useRef(null),z=a.useState(!1),ie=ge(z,2),Z=ie[0],b=ie[1],p=a.useRef(!1),D=a.useRef(!1),Y=a.useRef(!1),se=a.useState(function(){return W(d??h)}),K=ge(se,2),x=K[0],oe=K[1];function it(u){d===void 0&&oe(u)}var Ne=a.useCallback(function(u,l){if(!l)return v>=0?v:Math.max(re(u),re(g))},[v,g]),xe=a.useCallback(function(u){var l=String(u);if(F)return F(l);var y=l;return k&&(y=y.replace(k,".")),y.replace(/[^\w.-]+/g,"")},[F,k]),Ie=a.useRef(""),Ve=a.useCallback(function(u,l){if(B)return B(u,{userTyping:l,input:String(Ie.current)});var y=typeof u=="number"?we(u):u;if(!l){var f=Ne(y,l);if(Me(y)&&(k||f>=0)){var H=k||".";y=Se(y,H,f)}}return y},[B,Ne,k]),st=a.useState(function(){var u=h??d;return x.isInvalidate()&&["string","number"].includes(qt(u))?Number.isNaN(u)?"":u:Ve(x.toString(),!1)}),ke=ge(st,2),fe=ke[0],Te=ke[1];Ie.current=fe;function me(u,l){Te(Ve(u.isInvalidate()?u.toString(!1):u.toString(!l),l))}var le=a.useMemo(function(){return Je(S)},[S,v]),ue=a.useMemo(function(){return Je(s)},[s,v]),Be=a.useMemo(function(){return!le||!x||x.isInvalidate()?!1:le.lessEquals(x)},[le,x]),_e=a.useMemo(function(){return!ue||!x||x.isInvalidate()?!1:x.lessEquals(ue)},[ue,x]),ot=cr(q.current,Z),Le=ge(ot,2),lt=Le[0],ut=Le[1],Pe=function(l){return le&&!l.lessEquals(le)?le:ue&&!ue.lessEquals(l)?ue:null},Ee=function(l){return!Pe(l)},ve=function(l,y){var f=l,H=Ee(f)||f.isEmpty();if(!f.isEmpty()&&!y&&(f=Pe(f)||f,H=!0),!I&&!N&&H){var pe=f.toString(),Ce=Ne(pe,y);return Ce>=0&&(f=W(Se(pe,".",Ce)),Ee(f)||(f=W(Se(pe,".",Ce,!0)))),f.equals(x)||(it(f),T==null||T(f.isEmpty()?null:Ye(c,f)),d===void 0&&me(f,y)),f}return x},ct=gr(),Ue=function u(l){if(lt(),Ie.current=l,Te(l),!D.current){var y=xe(l),f=W(y);f.isNaN()||ve(f,!0)}L==null||L(l),ct(function(){var H=l;F||(H=l.replace(/ã€‚/g,".")),H!==l&&u(H)})},dt=function(){D.current=!0},ft=function(){D.current=!1,Ue(q.current.value)},mt=function(l){Ue(l.target.value)},$e=function(l){var y;if(!(l&&Be||!l&&_e)){p.current=!1;var f=W(Y.current?Xe(g):g);l||(f=f.negate());var H=(x||W(0)).add(f.toString()),pe=ve(H,!1);U==null||U(Ye(c,pe),{offset:Y.current?Xe(g):g,type:l?"up":"down"}),(y=q.current)===null||y===void 0||y.focus()}},Ge=function(l){var y=W(xe(fe)),f;y.isNaN()?f=ve(x,l):f=ve(y,l),d!==void 0?me(x,!1):f.isNaN()||me(f,!1)},pt=function(){p.current=!0},gt=function(l){var y=l.key,f=l.shiftKey;p.current=!0,Y.current=f,y==="Enter"&&(D.current||(p.current=!1),Ge(!1),P==null||P(l)),C!==!1&&!D.current&&["Up","ArrowUp","Down","ArrowDown"].includes(y)&&($e(y==="Up"||y==="ArrowUp"),l.preventDefault())},ht=function(){p.current=!1,Y.current=!1};a.useEffect(function(){if(E&&Z){var u=function(f){$e(f.deltaY<0),f.preventDefault()},l=q.current;if(l)return l.addEventListener("wheel",u,{passive:!1}),function(){return l.removeEventListener("wheel",u)}}});var vt=function(){Q&&Ge(!1),b(!1),p.current=!1};return je(function(){x.isInvalidate()||me(x,!1)},[v,B]),je(function(){var u=W(d);oe(u);var l=W(xe(fe));(!u.equals(l)||!p.current||B)&&me(u,p.current)},[d]),je(function(){B&&ut()},[fe]),a.createElement("div",{ref:ce,className:X(r,n,O(O(O(O(O({},"".concat(r,"-focused"),Z),"".concat(r,"-disabled"),N),"".concat(r,"-readonly"),I),"".concat(r,"-not-a-number"),x.isNaN()),"".concat(r,"-out-of-range"),!x.isInvalidate()&&!Ee(x))),style:i,onFocus:function(){b(!0)},onBlur:vt,onKeyDown:gt,onKeyUp:ht,onCompositionStart:dt,onCompositionEnd:ft,onBeforeInput:pt},R&&a.createElement(pr,{prefixCls:r,upNode:w,downNode:V,upDisabled:Be,downDisabled:_e,onStep:$e}),a.createElement("div",{className:"".concat(ae,"-wrap")},a.createElement("input",he({autoComplete:"off",role:"spinbutton","aria-valuemin":s,"aria-valuemax":S,"aria-valuenow":x.isInvalidate()?null:x.toString(),step:g},de,{ref:zt(q,t),className:ae,value:fe,onChange:mt,disabled:N,readOnly:I}))))}),Sr=a.forwardRef(function(e,t){var r=e.disabled,n=e.style,i=e.prefixCls,s=i===void 0?"rc-input-number":i,S=e.value,m=e.prefix,g=e.suffix,h=e.addonBefore,d=e.addonAfter,N=e.className,I=e.classNames,w=rt(e,vr),V=a.useRef(null),C=a.useRef(null),A=a.useRef(null),E=function(R){A.current&&yt(A.current,R)};return a.useImperativeHandle(t,function(){return ur(A.current,{nativeElement:V.current.nativeElement||C.current})}),a.createElement(St,{className:N,triggerFocus:E,prefixCls:s,value:S,disabled:r,style:n,prefix:m,suffix:g,addonAfter:d,addonBefore:h,classNames:I,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:V},a.createElement(br,he({prefixCls:s,disabled:r,ref:A,domRef:C,className:I==null?void 0:I.input},w)))});const yr=e=>{var t;const r=(t=e.handleVisible)!==null&&t!==void 0?t:"auto";return Object.assign(Object.assign({},wt(e)),{controlWidth:90,handleWidth:e.controlHeightSM-e.lineWidth*2,handleFontSize:e.fontSize/2,handleVisible:r,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new Ht(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:r===!0?1:0})},Qe=(e,t)=>{let{componentCls:r,borderRadiusSM:n,borderRadiusLG:i}=e;const s=t==="lg"?i:n;return{[`&-${t}`]:{[`${r}-handler-wrap`]:{borderStartEndRadius:s,borderEndEndRadius:s},[`${r}-handler-up`]:{borderStartEndRadius:s},[`${r}-handler-down`]:{borderEndEndRadius:s}}}},wr=e=>{const{componentCls:t,lineWidth:r,lineType:n,borderRadius:i,inputFontSizeSM:s,inputFontSizeLG:S,controlHeightLG:m,controlHeightSM:g,colorError:h,paddingInlineSM:d,paddingBlockSM:N,paddingBlockLG:I,paddingInlineLG:w,colorTextDescription:V,motionDurationMid:C,handleHoverColor:A,handleOpacity:E,paddingInline:j,paddingBlock:R,handleBg:c,handleActiveBg:F,colorTextDisabled:B,borderRadiusSM:v,borderRadiusLG:k,controlWidth:T,handleBorderColor:L,filledHandleBg:P,lineHeightLG:U,calc:G}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Re(e)),Ze(e)),{display:"inline-block",width:T,margin:0,padding:0,borderRadius:i}),xt(e,{[`${t}-handler-wrap`]:{background:c,[`${t}-handler-down`]:{borderBlockStart:`${_(r)} ${n} ${L}`}}})),It(e,{[`${t}-handler-wrap`]:{background:P,[`${t}-handler-down`]:{borderBlockStart:`${_(r)} ${n} ${L}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:c}}})),Et(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:S,lineHeight:U,borderRadius:k,[`input${t}-input`]:{height:G(m).sub(G(r).mul(2)).equal(),padding:`${_(I)} ${_(w)}`}},"&-sm":{padding:0,fontSize:s,borderRadius:v,[`input${t}-input`]:{height:G(g).sub(G(r).mul(2)).equal(),padding:`${_(N)} ${_(d)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:h}}},"&-group":Object.assign(Object.assign(Object.assign({},Re(e)),Ct(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:k,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:v}}},jt(e)),Rt(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Re(e)),{width:"100%",padding:`${_(R)} ${_(j)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${C} linear`,appearance:"textfield",fontSize:"inherit"}),$t(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:0,opacity:E,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${C}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:V,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${_(r)} ${n} ${L}`,transition:`all ${C} linear`,"&:active":{background:F},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:A}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},Jt()),{color:V,transition:`all ${C} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}},Qe(e,"lg")),Qe(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:B}})}]},Nr=e=>{const{componentCls:t,paddingBlock:r,paddingInline:n,inputAffixPadding:i,controlWidth:s,borderRadiusLG:S,borderRadiusSM:m,paddingInlineLG:g,paddingInlineSM:h,paddingBlockLG:d,paddingBlockSM:N,motionDurationMid:I}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${_(r)} 0`}},Ze(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:s,padding:0,paddingInlineStart:n,"&-lg":{borderRadius:S,paddingInlineStart:g,[`input${t}-input`]:{padding:`${_(d)} 0`}},"&-sm":{borderRadius:m,paddingInlineStart:h,[`input${t}-input`]:{padding:`${_(N)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:n,marginInlineStart:i,transition:`margin ${I}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(n).equal()}})}},xr=Kt("InputNumber",e=>{const t=Xt(e,Nt(e));return[wr(t),Nr(t),Yt(t)]},yr,{unitless:{handleOpacity:!0}});var Ir=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const at=a.forwardRef((e,t)=>{const{getPrefixCls:r,direction:n}=a.useContext(Qt),i=a.useRef(null);a.useImperativeHandle(t,()=>i.current);const{className:s,rootClassName:S,size:m,disabled:g,prefixCls:h,addonBefore:d,addonAfter:N,prefix:I,suffix:w,bordered:V,readOnly:C,status:A,controls:E,variant:j}=e,R=Ir(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),c=r("input-number",h),F=Dt(c),[B,v,k]=xr(c,F),{compactSize:T,compactItemClassnames:L}=Zt(c,n);let P=a.createElement(sr,{className:`${c}-handler-up-inner`}),U=a.createElement(Pt,{className:`${c}-handler-down-inner`});const G=typeof E=="boolean"?E:void 0;typeof E=="object"&&(P=typeof E.upIcon>"u"?P:a.createElement("span",{className:`${c}-handler-up-inner`},E.upIcon),U=typeof E.downIcon>"u"?U:a.createElement("span",{className:`${c}-handler-down-inner`},E.downIcon));const{hasFeedback:Q,status:ce,isFormItemInput:de,feedbackIcon:ae}=a.useContext(Ot),q=Ft(ce,A),z=er(x=>{var oe;return(oe=m??T)!==null&&oe!==void 0?oe:x}),ie=a.useContext(tr),Z=g??ie,[b,p]=At("inputNumber",j,V),D=Q&&a.createElement(a.Fragment,null,ae),Y=X({[`${c}-lg`]:z==="large",[`${c}-sm`]:z==="small",[`${c}-rtl`]:n==="rtl",[`${c}-in-form-item`]:de},v),se=`${c}-group`,K=a.createElement(Sr,Object.assign({ref:i,disabled:Z,className:X(k,F,s,S,L),upHandler:P,downHandler:U,prefixCls:c,readOnly:C,controls:G,prefix:I,suffix:D||w,addonBefore:d&&a.createElement(qe,{form:!0,space:!0},d),addonAfter:N&&a.createElement(qe,{form:!0,space:!0},N),classNames:{input:Y,variant:X({[`${c}-${b}`]:p},We(c,q,Q)),affixWrapper:X({[`${c}-affix-wrapper-sm`]:z==="small",[`${c}-affix-wrapper-lg`]:z==="large",[`${c}-affix-wrapper-rtl`]:n==="rtl",[`${c}-affix-wrapper-without-controls`]:E===!1},v),wrapper:X({[`${se}-rtl`]:n==="rtl"},v),groupWrapper:X({[`${c}-group-wrapper-sm`]:z==="small",[`${c}-group-wrapper-lg`]:z==="large",[`${c}-group-wrapper-rtl`]:n==="rtl",[`${c}-group-wrapper-${b}`]:p},We(`${c}-group-wrapper`,q,Q),v)}},R));return B(K)}),Ae=at,Er=e=>a.createElement(rr,{theme:{components:{InputNumber:{handleVisible:!0}}}},a.createElement(at,Object.assign({},e)));Ae._InternalPanelDoNotUseOrYouWillBeFired=Er;const{Title:De}=Mt;function on(){const{courseId:e}=Bt(),[t]=$.useForm(),[r]=$.useForm(),[n]=$.useForm(),[i,s]=a.useState(!1),[S,m]=a.useState(),[g,h]=a.useState(null),[d,N]=a.useState(!1),[I,w]=a.useState(null),[V,C]=a.useState(!1),[A,E]=a.useState(!1),[j,R]=a.useState(null),[c,F]=a.useState([]);a.useEffect(()=>{v!=null&&v.previewUrl&&F([{uid:"-1",name:"preview.png",status:"done",url:v.previewUrl}]);const p=(()=>{const D=document.createElement("script");return D.src="https://www.tiktok.com/embed.js",D.async=!0,document.body.appendChild(D),D})();return()=>{p&&document.body.removeChild(p)}},[]);const{mutateAsync:B}=Vt(),{data:v,isLoading:k,refetch:T}=ee.course.findUnique.useQuery({where:{id:e},include:{sections:{include:{videos:!0}}}}),{mutateAsync:L}=ee.course.update.useMutation(),{mutateAsync:P}=ee.section.create.useMutation(),{mutateAsync:U}=ee.video.create.useMutation(),{mutateAsync:G}=ee.video.update.useMutation(),{mutateAsync:Q}=ee.video.delete.useMutation(),{mutateAsync:ce}=ee.section.delete.useMutation(),de=async b=>{try{let p=v.previewUrl;if(c.length>0&&c[0]instanceof File)try{const{url:K}=await B({file:c[0]});p=K}catch(K){console.error("Image upload error:",K),M.error("Failed to upload image: "+K.message);return}const{paymentLink:D,...Y}=b,se={...Y,previewUrl:p,paymentLink:D||null};console.log("Updating course with data:",se),await L({where:{id:e},data:se}),M.success("Course updated successfully"),T()}catch(p){console.error("Course update error:",p),M.error(`Failed to update course: ${p.message}`),M.error("Please check the form values and try again")}},ae=async b=>{try{await P({data:{...b,courseId:e}}),M.success("Section added successfully"),r.resetFields(),T()}catch{M.error("Failed to add section")}},q=b=>{h(b),n.setFieldsValue(b),s(!0)},z=async b=>{try{await Q({where:{id:b}}),M.success("Video deleted successfully"),T()}catch(p){console.error("Delete video error:",p),M.error(`Failed to delete video: ${p.message}`)}},ie=async b=>{try{await ce({where:{id:b}}),M.success("Section deleted successfully"),T()}catch(p){console.error("Delete section error:",p),M.error(`Failed to delete section: ${p.message}`)}finally{w(null),C(!1),E(!1)}},Z=async b=>{N(!0);try{const p={title:b.title,description:b.description,embedLink:b.embedLink,order:b.order,sectionId:S};g?(await G({where:{id:g.id},data:p}),M.success("Video updated successfully")):(await U({data:p}),M.success("Video added successfully")),T()}catch(p){console.error("Video save error:",p),M.error(`Failed to save video: ${p.message}`)}finally{s(!1),h(null),n.resetFields(),N(!1)}};return k?o.jsx(ze,{children:o.jsx("div",{className:"flex justify-center items-center h-full",children:o.jsx(_t,{size:"large"})})}):o.jsx(ze,{children:o.jsxs("div",{className:"max-w-4xl mx-auto p-6 md:p-4 sm:p-2",children:[o.jsx(De,{level:2,children:"Edit Course"}),o.jsxs($,{form:t,layout:"vertical",initialValues:v,onFinish:de,className:"mb-8",children:[o.jsx($.Item,{name:"title",label:"Title",rules:[{required:!0}],className:"w-full",children:o.jsx(J,{className:"w-full"})}),(v==null?void 0:v.previewUrl)&&o.jsx($.Item,{name:"previewUrl",label:"Current Preview Image",children:o.jsx(Tt.Img,{src:v.previewUrl,isPretty:!0,styleWrapper:{position:"relative",maxWidth:"100%",height:"auto",aspectRatio:"16/9"},styleImg:{objectFit:"cover",objectPosition:"center",width:"100%",height:"100%"}})}),o.jsx($.Item,{name:"previewUrl",label:v!=null&&v.previewUrl?"Change Preview Image":"Preview Image",children:o.jsx(kt,{fileList:c,beforeUpload:b=>b.size/1024/1024<2?(F([b]),!1):(M.error("Image must be smaller than 2MB"),!1),onRemove:()=>F([]),maxCount:1,listType:"picture",children:c.length===0&&"+ Upload"})}),o.jsx($.Item,{name:"description",label:"Description",rules:[{required:!0}],className:"w-full",children:o.jsx(J.TextArea,{className:"w-full"})}),o.jsx($.Item,{name:"price",label:"Price (XAF)",rules:[{required:!0}],className:"w-full",children:o.jsx(J,{className:"w-full"})}),o.jsx($.Item,{name:"paymentLink",label:"Payment Link",className:"w-full",children:o.jsx(J,{className:"w-full",placeholder:"Enter payment URL"})}),o.jsx($.Item,{name:"isPremium",label:"Premium Course",valuePropName:"checked",className:"w-full",children:o.jsx(Lt,{})}),o.jsx(te,{type:"primary",htmlType:"submit",children:"Update Course"})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx(De,{level:3,children:"Sections"}),o.jsxs($,{form:r,layout:"vertical",onFinish:ae,children:[o.jsx($.Item,{name:"title",label:"Section Title",rules:[{required:!0}],className:"w-full",children:o.jsx(J,{className:"w-full"})}),o.jsx($.Item,{name:"order",label:"Order",rules:[{required:!0}],className:"w-full",children:o.jsx(Ae,{min:1,className:"w-full"})}),o.jsx(te,{type:"primary",htmlType:"submit",children:"Add Section"})]})]}),o.jsx(He,{dataSource:v==null?void 0:v.sections,renderItem:b=>o.jsx(He.Item,{children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[o.jsx(De,{level:4,children:b.title}),o.jsxs(Ke,{gap:2,children:[o.jsx(te,{type:"primary",onClick:()=>{m(b.id),s(!0)},children:"Add Video"}),o.jsx(te,{danger:!0,onClick:()=>{w(b.id),C(!0)},children:"Delete Section"})]})]}),o.jsx(nr,{dataSource:b.videos,columns:[{title:"Title",dataIndex:"title",ellipsis:!0},{title:"Source",dataIndex:"embedLink",ellipsis:!0},{title:"Order",dataIndex:"order",ellipsis:!0},{title:"Actions",render:(p,D)=>o.jsxs(Ke,{children:[o.jsx(te,{onClick:()=>q(D),children:"Edit"}),o.jsx(te,{danger:!0,onClick:()=>R(D.id),children:"Delete"})]})}],pagination:!1,scroll:{x:!0},responsive:!0})]})})}),o.jsx(be,{title:g?"Edit Video":"Add Video",open:i,width:"100%",centered:!0,onCancel:()=>{s(!1),h(null),n.resetFields()},footer:null,children:o.jsxs($,{form:n,layout:"vertical",onFinish:Z,children:[o.jsx($.Item,{name:"title",label:"Title",rules:[{required:!0},{max:100,message:"Title cannot exceed 100 characters"}],children:o.jsx(J,{})}),o.jsx($.Item,{name:"description",label:"Description",rules:[{required:!0},{max:500,message:"Description cannot exceed 500 characters"}],children:o.jsx(J.TextArea,{})}),o.jsx($.Item,{name:"embedLink",label:"Embed Link",rules:[{required:!0,message:"Please input video link!"}],children:o.jsx(J,{})}),o.jsx($.Item,{name:"order",label:"Order",rules:[{required:!0}],children:o.jsx(Ae,{min:1})}),o.jsxs(te,{type:"primary",htmlType:"submit",loading:d,children:[g?"Update":"Add"," Video"]})]})}),o.jsx(be,{title:"Delete Section",open:V,width:"100%",centered:!0,onOk:()=>{C(!1),E(!0)},onCancel:()=>{w(null),C(!1)},children:o.jsx("p",{children:"Are you sure you want to delete this section? All videos will be deleted."})}),o.jsx(be,{title:"Final Confirmation",open:A,width:"100%",centered:!0,onOk:()=>ie(I),onCancel:()=>{w(null),E(!1)},children:o.jsx("p",{children:"This action cannot be undone. Are you absolutely sure?"})}),o.jsx(be,{title:"Delete Video",open:!!j,width:"100%",centered:!0,onOk:()=>{z(j),R(null)},onCancel:()=>R(null),children:o.jsx("p",{children:"Are you sure you want to delete this video? This action cannot be undone."})})]})})}export{on as default};
