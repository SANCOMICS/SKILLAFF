import{j as e}from"./index-Bhhhx7h4.js";import{u as x}from"./useUserContext-ltZQ69X3.js";import{A as a}from"./index-CWUlnviP.js";import{S as h}from"./provider-RLEbTht8.js";import{u as m}from"./index-CeUTncnb.js";import{s as g}from"./index-BzyPBYP5.js";import{T as y,B as f}from"./index-C7Q2D2Yy.js";import{R as j,C as n}from"./row-B-zWIMNx.js";import{C as l}from"./index-cPgcPs25.js";import{P as s}from"./index-C6x-598G.js";import"./responsiveObserver-CzlRrsiN.js";import"./Dropdown-EsR9A278.js";import"./index-BHyeewtM.js";import"./EllipsisOutlined-Bce2vzrs.js";const{Title:v,Text:o}=y;function N(){const d=m(),{user:t}=x(),{data:i,isLoading:c,error:u}=a.userCourse.findMany.useQuery({where:{userId:t==null?void 0:t.id},include:{course:!0}},{onError:r=>{console.error("Failed to fetch enrolled courses:",r),g.error("Failed to load your courses. Please try again later.")}}),{data:w}=a.subscription.findFirst.useQuery({where:{userId:t==null?void 0:t.id}}),p=r=>{d(`/courses/${r}`)};return u?e.jsx(s,{layout:"full-width",children:e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(o,{type:"danger",children:"Failed to load courses. Please try again later."})})}):c?e.jsx(s,{layout:"full-width",children:e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(h,{size:"large"})})}):e.jsx(s,{layout:"full-width",children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e.jsxs(v,{level:2,children:[e.jsx("i",{className:"las la-graduation-cap"})," My Courses"]}),e.jsx(o,{children:"Continue learning from where you left off"})]}),e.jsxs(j,{gutter:[24,24],children:[i==null?void 0:i.map(r=>e.jsx(n,{xs:24,sm:12,md:8,lg:8,children:e.jsxs(l,{hoverable:!0,cover:e.jsx("img",{alt:r.course.title||"Course preview",src:r.course.previewUrl||"/images/course-fallback.jpg",style:{height:"200px",objectFit:"cover"},loading:"lazy",width:"100%",height:"200"}),children:[e.jsx(l.Meta,{title:r.course.title,description:r.course.description}),e.jsx(f,{type:"primary",block:!0,style:{marginTop:"16px"},onClick:()=>p(r.course.id),children:"Continue"})]})},r.id)),(i==null?void 0:i.length)===0&&e.jsx(n,{span:24,style:{textAlign:"center"},children:e.jsx(o,{children:"You haven't enrolled in any courses yet."})})]})]})})}export{N as default};
