import{r as c,j as e}from"./index-Bhhhx7h4.js";import{A as u}from"./index-CWUlnviP.js";import{A as j}from"./index-HjNU2j5p.js";import{u as A}from"./index-CeUTncnb.js";import{u as k}from"./index-DWrdUq8q.js";import{F as t,I as m}from"./index-C8qbBouM.js";import{F as n,T as s,B as o}from"./index-C7Q2D2Yy.js";import"./index-bZIECVya.js";import"./SearchOutlined-ADv_U9mc.js";import"./collapse-BbEVqHco.js";import"./row-B-zWIMNx.js";import"./responsiveObserver-CzlRrsiN.js";function N(){const h=A(),[p]=k(),[g]=t.useForm(),[f,a]=c.useState(!1),{mutateAsync:l}=u.authentication.createAdmin.useMutation(),{mutateAsync:y}=u.authentication.login.useMutation({onSuccess:r=>{r.redirect&&(window.location.href=r.redirect)}}),d=p.get("error"),x={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",UserNotVerified:"Please verify your account by checking your email.",EmailSignin:"Check your email address.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",default:"Unable to sign in."}[d??"default"];c.useEffect(()=>{},[]),c.useEffect(()=>{(async()=>{try{await l({email:"admin@admin.com",password:"admin123"})}catch{}})()},[l]);const w=async r=>{a(!0);try{const i=await y({email:r.email,password:r.password});i.success||(a(!1),window.location.href=i.redirect)}catch(i){i instanceof Error&&("code"in i?window.location.href=`/login?error=${i.code}`:window.location.href="/login?error=default"),a(!1)}};return e.jsx(n,{align:"center",justify:"center",vertical:!0,flex:1,children:e.jsxs(n,{vertical:!0,style:{width:"340px",paddingBottom:"50px",paddingTop:"50px"},gap:"middle",children:[e.jsx(j,{description:"Welcome!"}),d&&e.jsx(s.Text,{type:"danger",children:x}),e.jsxs(t,{form:g,onFinish:w,layout:"vertical",requiredMark:!1,children:[e.jsx(t.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"}],children:e.jsx(m,{type:"email",placeholder:"Your email",autoComplete:"email"})}),e.jsx(t.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}],children:e.jsx(m.Password,{type:"password",placeholder:"Your password",autoComplete:"current-password"})}),e.jsx(t.Item,{children:e.jsx(n,{justify:"end",children:e.jsx(o,{type:"link",onClick:()=>window.open("https://wa.link/f2dnnq","_blank"),style:{padding:0,margin:0},children:"Forgot password?"})})}),e.jsx(t.Item,{children:e.jsx(o,{type:"primary",htmlType:"submit",block:!0,loading:f,children:"Sign in"})})]}),e.jsx(o,{ghost:!0,style:{border:"none"},onClick:()=>h("/register"),children:e.jsxs(n,{gap:"small",justify:"center",children:[e.jsx(s.Text,{type:"secondary",children:"No account?"})," ",e.jsx(s.Text,{children:"Sign up"})]})}),e.jsx(o,{ghost:!0,style:{border:"none"},onClick:()=>window.location.href="https://skillflow.online/login/",children:e.jsxs(n,{gap:"small",justify:"center",children:[e.jsx(s.Text,{type:"secondary",children:"Issue signing in?"}),e.jsx(s.Text,{children:"Click here then try again!"})]})})]})})}export{N as default};
