import{r as u,j as e}from"./index-Bhhhx7h4.js";import{U as v}from"./index-C7KOCkDY.js";import{A as F}from"./index-CWUlnviP.js";import{A as I}from"./index-HjNU2j5p.js";import{u as P}from"./index-CeUTncnb.js";import{u as T}from"./index-DWrdUq8q.js";import{F as s,I as d}from"./index-C8qbBouM.js";import{F as o,B as p,T as g}from"./index-C7Q2D2Yy.js";import{s as n}from"./index-BzyPBYP5.js";import"./index-bZIECVya.js";import"./SearchOutlined-ADv_U9mc.js";import"./collapse-BbEVqHco.js";import"./row-B-zWIMNx.js";import"./responsiveObserver-CzlRrsiN.js";function Y(){const l=P(),[a]=T(),[m]=s.useForm(),[f,c]=u.useState(!1),{mutateAsync:h}=F.authentication.register.useMutation();u.useEffect(()=>{var t;const i=(t=a.get("email"))==null?void 0:t.trim();v.isDefined(i)&&m.setFieldsValue({email:i})},[a]);const x=async i=>{var t;c(!0);try{const r=a.get("tokenInvitation")??void 0,j=y(),b=await h({...i,password:j,tokenInvitation:r});n.success("Registration successful! Please check your email for verification."),l("/login")}catch(r){console.error("Could not sign up:",r),((t=r==null?void 0:r.data)==null?void 0:t.code)==="CONFLICT"?n.error("This user already exists. Please sign in or use a different email."):n.error("An error occurred during registration. Please try again."),c(!1)}},y=()=>Math.random().toString(36).slice(-8);return e.jsx(o,{align:"center",justify:"center",vertical:!0,flex:1,children:e.jsxs(o,{vertical:!0,style:{width:"340px",paddingBottom:"50px",paddingTop:"50px"},gap:"middle",children:[e.jsx(I,{description:"Welcome!"}),e.jsxs(s,{form:m,onFinish:x,layout:"vertical",autoComplete:"off",requiredMark:!1,children:[e.jsx(s.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"}],children:e.jsx(d,{type:"email",placeholder:"Your email",autoComplete:"email"})}),e.jsx(s.Item,{name:"name",rules:[{required:!0,message:"Name is required"}],label:"Name",children:e.jsx(d,{placeholder:"Your name"})}),e.jsx(s.Item,{children:e.jsx(p,{type:"primary",htmlType:"submit",loading:f,block:!0,children:"Register"})})]}),e.jsx(p,{ghost:!0,style:{border:"none"},onClick:()=>l("/login"),children:e.jsxs(o,{gap:"small",justify:"center",children:[e.jsx(g.Text,{type:"secondary",children:"Have an account?"})," ",e.jsx(g.Text,{children:"Sign in"})]})})]})})}export{Y as default};
