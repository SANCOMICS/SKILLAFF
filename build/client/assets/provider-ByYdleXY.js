var V=Object.defineProperty;var W=(e,r,t)=>r in e?V(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var S=(e,r,t)=>W(e,typeof r!="symbol"?r+"":r,t);import{r as n,R as _,j as o}from"./index-Bhhhx7h4.js";import{R as N}from"./index-CI-NhIJ-.js";import{B as j}from"./button-DgkAoqE2.js";import{t as G,C as b,L as q,d as k,q as J,N as K,O as Q,u as U,F as X,R as Y,P as Z}from"./index-Bs36QOeU.js";import{T as E}from"./index-D9_lrgu6.js";import{D as ee}from"./index-BtJ7AB49.js";import{S as T,u as P,L as te,a as re}from"./Sider-C8x-a6eO.js";import{S as se}from"./index-_rPoQdzz.js";import{s as oe}from"./index-DaEJ5rVL.js";function ne(e,r,t){return typeof t=="boolean"?t:e.length?!0:G(r).some(a=>a.type===T)}var L=function(e,r){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(t[s[a]]=e[s[a]]);return t};function h(e){let{suffixCls:r,tagName:t,displayName:s}=e;return a=>n.forwardRef((c,i)=>n.createElement(a,Object.assign({ref:i,suffixCls:r,tagName:t},c)))}const v=n.forwardRef((e,r)=>{const{prefixCls:t,suffixCls:s,className:a,tagName:l}=e,c=L(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:i}=n.useContext(b),u=i("layout",t),[p,x,g]=P(u),y=s?`${u}-${s}`:u;return p(n.createElement(l,Object.assign({className:k(t||y,a,x,g),ref:r},c)))}),ae=n.forwardRef((e,r)=>{const{direction:t}=n.useContext(b),[s,a]=n.useState([]),{prefixCls:l,className:c,rootClassName:i,children:u,hasSider:p,tagName:x,style:g}=e,y=L(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),z=q(y,["suffixCls"]),{getPrefixCls:B,layout:m}=n.useContext(b),f=B("layout",l),H=ne(s,u,p),[I,F,M]=P(f),D=k(f,{[`${f}-has-sider`]:H,[`${f}-rtl`]:t==="rtl"},m==null?void 0:m.className,c,i,F,M),$=n.useMemo(()=>({siderHook:{addSider:C=>{a(w=>[].concat(J(w),[C]))},removeSider:C=>{a(w=>w.filter(A=>A!==C))}}}),[]);return I(n.createElement(te.Provider,{value:$},n.createElement(x,Object.assign({ref:r,className:D,style:Object.assign(Object.assign({},m==null?void 0:m.style),g)},z),u)))}),ie=h({tagName:"div",displayName:"Layout"})(ae),le=h({suffixCls:"header",tagName:"header",displayName:"Header"})(v),ce=h({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(v),de=h({suffixCls:"content",tagName:"main",displayName:"Content"})(v),d=ie;d.Header=le;d.Footer=ce;d.Content=de;d.Sider=T;d._InternalSiderContext=re;function ue(){const[e,r,t]=U();return{theme:e,token:r,hashId:t}}const R={defaultSeed:K.token,useToken:ue,defaultAlgorithm:Q};class me extends _.Component{constructor(t){super(t);S(this,"handleReload",()=>{window.location.reload()});S(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("Error caught in ErrorBoundary: ",t,s)}render(){return this.state.hasError&&this.state.error?o.jsx(N,{status:"error",title:"Something went wrong in your code.",subTitle:"There was an unexpected error in the application. Check the details below for debugging.",style:{background:"white"},extra:o.jsxs(o.Fragment,{children:[o.jsx(j,{type:"primary",onClick:this.handleReload,children:"Reload Page"}),o.jsx(j,{type:"primary",onClick:this.handleGoHome,children:"Back Home"}),o.jsxs(X,{vertical:!0,className:"mt-5",style:{textAlign:"left"},children:[o.jsx(E.Title,{level:5,children:"Error Message"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:this.state.error.message}),o.jsx(ee,{}),o.jsx(E.Title,{level:5,children:"Stack Trace"}),o.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:this.state.error.stack})]})]})}):this.props.children}}const fe=()=>{const[e,r]=n.useState(!1),[t,s]=n.useState(!1);return n.useEffect(()=>{const a=setTimeout(()=>{e||s(!0)},5e3);try{r(!0)}catch(l){s(!0),console.error("Initialization failed:",l)}return()=>clearTimeout(a)},[]),!e&&!t?o.jsx("div",{}):t?o.jsx(d.Content,{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(N,{status:"error",title:"Initialization Failed",subTitle:"The application failed to initialize. Please try again.",extra:[o.jsx(j,{type:"primary",onClick:()=>window.location.reload(),children:"Retry"},"reload")]})}):o.jsx(d.Content,{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(se,{indicator:o.jsx(Y,{spin:!0}),size:"large"})})},{useToken:he}=R,pe=({children:e})=>{const[r,t]=n.useState(!0),{token:s}=he();return n.useEffect(()=>{if(r){t(!1);return}return document.documentElement.style.backgroundColor=s.colorBgBase,document.documentElement.style.color=s.colorTextBase,()=>{document.documentElement.style.backgroundColor="",document.documentElement.style.color=""}},[r]),o.jsx(o.Fragment,{children:r?o.jsx(fe,{}):e})},O=n.createContext({isMobile:!1,message:null,isLoading:!0}),ke=()=>n.useContext(O),xe=({children:e})=>{const[r,t]=n.useState(!0),[s,a]=n.useState(!1),l=typeof window<"u",c={algorithm:R.defaultAlgorithm,token:{colorPrimary:"black",colorTextBase:"black",colorLink:"black",colorBgBase:"white",colorBgContainer:"white"}};return n.useEffect(()=>{if(l)try{a(window.innerWidth<992);const i=()=>{a(window.innerWidth<992)};return window.addEventListener("resize",i),()=>{l&&window.removeEventListener("resize",i)}}catch(i){console.error("Failed to initialize mobile detection:",i)}},[]),n.useEffect(()=>{if(l)try{const i=()=>{document.documentElement.style.setProperty("--100vh",`${window.innerHeight}px`)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}catch(i){console.error("Failed to initialize vh variable:",i)}finally{t(!1)}},[]),o.jsx(Z,{theme:c,children:o.jsx(O.Provider,{value:{isMobile:s,message:oe,isLoading:r},children:e})})},Te=({children:e})=>o.jsx(me,{children:o.jsx(xe,{children:o.jsx(pe,{children:e})})});export{Te as D,me as E,fe as M,ke as u};
