import{j as e}from"./index-Bhhhx7h4.js";import{u as x}from"./useUserContext-CjczNUYd.js";import{A as a,T as m}from"./index-D9_lrgu6.js";import{u as h}from"./index-CeUTncnb.js";import{s as g}from"./index-DaEJ5rVL.js";import{S as y}from"./index-_rPoQdzz.js";import{R as f,C as n}from"./row-DHszOpHb.js";import{C as l}from"./index-ydtyDG1o.js";import{B as j}from"./button-DgkAoqE2.js";import{P as s}from"./index-ufwEpZVH.js";import"./index-Bs36QOeU.js";import"./ExclamationCircleFilled-CiuxUjGk.js";import"./pickAttrs-r0RFaJBP.js";import"./CloseOutlined-Dxm4jkL9.js";import"./responsiveObserver-Cz69L87y.js";import"./Dropdown-DVbf8yOU.js";import"./index-CeoCv33H.js";import"./EllipsisOutlined-D3hTA01Z.js";const{Title:v,Text:o}=m;function W(){const d=h(),{user:t}=x(),{data:i,isLoading:c,error:u}=a.userCourse.findMany.useQuery({where:{userId:t==null?void 0:t.id},include:{course:!0}},{onError:r=>{console.error("Failed to fetch enrolled courses:",r),g.error("Failed to load your courses. Please try again later.")}}),{data:w}=a.subscription.findFirst.useQuery({where:{userId:t==null?void 0:t.id}}),p=r=>{d(`/courses/${r}`)};return u?e.jsx(s,{layout:"full-width",children:e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(o,{type:"danger",children:"Failed to load courses. Please try again later."})})}):c?e.jsx(s,{layout:"full-width",children:e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(y,{size:"large"})})}):e.jsx(s,{layout:"full-width",children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e.jsxs(v,{level:2,children:[e.jsx("i",{className:"las la-graduation-cap"})," My Courses"]}),e.jsx(o,{children:"Continue learning from where you left off"})]}),e.jsxs(f,{gutter:[24,24],children:[i==null?void 0:i.map(r=>e.jsx(n,{xs:24,sm:12,md:8,lg:8,children:e.jsxs(l,{hoverable:!0,cover:e.jsx("img",{alt:r.course.title||"Course preview",src:r.course.previewUrl||"/images/course-fallback.jpg",style:{height:"200px",objectFit:"cover"},loading:"lazy",width:"100%",height:"200"}),children:[e.jsx(l.Meta,{title:r.course.title,description:r.course.description}),e.jsx(j,{type:"primary",block:!0,style:{marginTop:"16px"},onClick:()=>p(r.course.id),children:"Continue"})]})},r.id)),(i==null?void 0:i.length)===0&&e.jsx(n,{span:24,style:{textAlign:"center"},children:e.jsx(o,{children:"You haven't enrolled in any courses yet."})})]})]})})}export{W as default};
