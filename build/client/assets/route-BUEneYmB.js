import{g as de,d as me,r as H,j as e}from"./index-Bhhhx7h4.js";import{u as he}from"./useUserContext-CjczNUYd.js";import{A as M,T as re,R as ue}from"./index-D9_lrgu6.js";import{F as I,I as W}from"./index-IivWOIOz.js";import{B as q}from"./button-DgkAoqE2.js";import{R as fe,T as pe}from"./index-CeoCv33H.js";import{S as Q}from"./Pagination-CBJzwpBi.js";import{F as ae}from"./Table-DELuyHK0.js";import{M as ne}from"./index-DsxaOx6h.js";import{S as ye}from"./index-ZOWeBnvh.js";import{s as S}from"./index-DaEJ5rVL.js";import{R as xe}from"./DeleteOutlined-Cz9l2vbV.js";import{D as ge}from"./index-BtJ7AB49.js";import{u as ve}from"./index-CeUTncnb.js";import{P as je}from"./index-ufwEpZVH.js";import"./index-Bs36QOeU.js";import"./pickAttrs-r0RFaJBP.js";import"./SearchOutlined-CdaQ9A1C.js";import"./collapse-BbEVqHco.js";import"./row-DHszOpHb.js";import"./responsiveObserver-Cz69L87y.js";import"./ExclamationCircleFilled-CiuxUjGk.js";import"./CloseOutlined-Dxm4jkL9.js";import"./EllipsisOutlined-D3hTA01Z.js";import"./Dropdown-DVbf8yOU.js";import"./LeftOutlined-R_ycQdco.js";import"./useBreakpoint-D4cuiZ4X.js";import"./index-Hz7ZMWx3.js";import"./index-rKHRpc2j.js";import"./Sider-C8x-a6eO.js";import"./index-Bjxa92qe.js";import"./index-_rPoQdzz.js";import"./useClosable-CCDYGg12.js";import"./fade-2t19LHl3.js";var ce={exports:{}};(function(w,c){(function(b,N){w.exports=N()})(me,function(){var b=1e3,N=6e4,P=36e5,x="millisecond",E="second",D="minute",g="hour",F="day",A="week",p="month",O="quarter",L="year",u="date",v="Invalid Date",V=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var s=["th","st","nd","rd"],t=a%100;return"["+a+(s[(t-20)%10]||s[t]||s[0])+"]"}},$=function(a,s,t){var i=String(a);return!i||i.length>=s?a:""+Array(s+1-i.length).join(t)+a},o={s:$,z:function(a){var s=-a.utcOffset(),t=Math.abs(s),i=Math.floor(t/60),r=t%60;return(s<=0?"+":"-")+$(i,2,"0")+":"+$(r,2,"0")},m:function a(s,t){if(s.date()<t.date())return-a(t,s);var i=12*(t.year()-s.year())+(t.month()-s.month()),r=s.clone().add(i,p),n=t-r<0,l=s.clone().add(i+(n?-1:1),p);return+(-(i+(t-r)/(n?r-l:l-r))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:p,y:L,w:A,d:F,D:u,h:g,m:D,s:E,ms:x,Q:O}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},C="en",R={};R[C]=T;var G="$isDayjsObject",d=function(a){return a instanceof se||!(!a||!a[G])},y=function a(s,t,i){var r;if(!s)return C;if(typeof s=="string"){var n=s.toLowerCase();R[n]&&(r=n),t&&(R[n]=t,r=n);var l=s.split("-");if(!r&&l.length>1)return a(l[0])}else{var h=s.name;R[h]=s,r=h}return!i&&r&&(C=r),r||!i&&C},f=function(a,s){if(d(a))return a.clone();var t=typeof s=="object"?s:{};return t.date=a,t.args=arguments,new se(t)},m=o;m.l=y,m.i=d,m.w=function(a,s){return f(a,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var se=function(){function a(t){this.$L=y(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[G]=!0}var s=a.prototype;return s.parse=function(t){this.$d=function(i){var r=i.date,n=i.utc;if(r===null)return new Date(NaN);if(m.u(r))return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){var l=r.match(V);if(l){var h=l[2]-1||0,j=(l[7]||"0").substring(0,3);return n?new Date(Date.UTC(l[1],h,l[3]||1,l[4]||0,l[5]||0,l[6]||0,j)):new Date(l[1],h,l[3]||1,l[4]||0,l[5]||0,l[6]||0,j)}}return new Date(r)}(t),this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return m},s.isValid=function(){return this.$d.toString()!==v},s.isSame=function(t,i){var r=f(t);return this.startOf(i)<=r&&r<=this.endOf(i)},s.isAfter=function(t,i){return f(t)<this.startOf(i)},s.isBefore=function(t,i){return this.endOf(i)<f(t)},s.$g=function(t,i,r){return m.u(t)?this[i]:this.set(r,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,i){var r=this,n=!!m.u(i)||i,l=m.p(t),h=function(K,_){var B=m.w(r.$u?Date.UTC(r.$y,_,K):new Date(r.$y,_,K),r);return n?B:B.endOf(F)},j=function(K,_){return m.w(r.toDate()[K].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(_)),r)},k=this.$W,U=this.$M,Y=this.$D,X="set"+(this.$u?"UTC":"");switch(l){case L:return n?h(1,0):h(31,11);case p:return n?h(1,U):h(0,U+1);case A:var Z=this.$locale().weekStart||0,ee=(k<Z?k+7:k)-Z;return h(n?Y-ee:Y+(6-ee),U);case F:case u:return j(X+"Hours",0);case g:return j(X+"Minutes",1);case D:return j(X+"Seconds",2);case E:return j(X+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,i){var r,n=m.p(t),l="set"+(this.$u?"UTC":""),h=(r={},r[F]=l+"Date",r[u]=l+"Date",r[p]=l+"Month",r[L]=l+"FullYear",r[g]=l+"Hours",r[D]=l+"Minutes",r[E]=l+"Seconds",r[x]=l+"Milliseconds",r)[n],j=n===F?this.$D+(i-this.$W):i;if(n===p||n===L){var k=this.clone().set(u,1);k.$d[h](j),k.init(),this.$d=k.set(u,Math.min(this.$D,k.daysInMonth())).$d}else h&&this.$d[h](j);return this.init(),this},s.set=function(t,i){return this.clone().$set(t,i)},s.get=function(t){return this[m.p(t)]()},s.add=function(t,i){var r,n=this;t=Number(t);var l=m.p(i),h=function(U){var Y=f(n);return m.w(Y.date(Y.date()+Math.round(U*t)),n)};if(l===p)return this.set(p,this.$M+t);if(l===L)return this.set(L,this.$y+t);if(l===F)return h(1);if(l===A)return h(7);var j=(r={},r[D]=N,r[g]=P,r[E]=b,r)[l]||1,k=this.$d.getTime()+t*j;return m.w(k,this)},s.subtract=function(t,i){return this.add(-1*t,i)},s.format=function(t){var i=this,r=this.$locale();if(!this.isValid())return r.invalidDate||v;var n=t||"YYYY-MM-DDTHH:mm:ssZ",l=m.z(this),h=this.$H,j=this.$m,k=this.$M,U=r.weekdays,Y=r.months,X=r.meridiem,Z=function(_,B,te,ie){return _&&(_[B]||_(i,n))||te[B].slice(0,ie)},ee=function(_){return m.s(h%12||12,_,"0")},K=X||function(_,B,te){var ie=_<12?"AM":"PM";return te?ie.toLowerCase():ie};return n.replace(z,function(_,B){return B||function(te){switch(te){case"YY":return String(i.$y).slice(-2);case"YYYY":return m.s(i.$y,4,"0");case"M":return k+1;case"MM":return m.s(k+1,2,"0");case"MMM":return Z(r.monthsShort,k,Y,3);case"MMMM":return Z(Y,k);case"D":return i.$D;case"DD":return m.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return Z(r.weekdaysMin,i.$W,U,2);case"ddd":return Z(r.weekdaysShort,i.$W,U,3);case"dddd":return U[i.$W];case"H":return String(h);case"HH":return m.s(h,2,"0");case"h":return ee(1);case"hh":return ee(2);case"a":return K(h,j,!0);case"A":return K(h,j,!1);case"m":return String(j);case"mm":return m.s(j,2,"0");case"s":return String(i.$s);case"ss":return m.s(i.$s,2,"0");case"SSS":return m.s(i.$ms,3,"0");case"Z":return l}return null}(_)||l.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,i,r){var n,l=this,h=m.p(i),j=f(t),k=(j.utcOffset()-this.utcOffset())*N,U=this-j,Y=function(){return m.m(l,j)};switch(h){case L:n=Y()/12;break;case p:n=Y();break;case O:n=Y()/3;break;case A:n=(U-k)/6048e5;break;case F:n=(U-k)/864e5;break;case g:n=U/P;break;case D:n=U/N;break;case E:n=U/b;break;default:n=U}return r?n:m.a(n)},s.daysInMonth=function(){return this.endOf(p).$D},s.$locale=function(){return R[this.$L]},s.locale=function(t,i){if(!t)return this.$L;var r=this.clone(),n=y(t,i,!0);return n&&(r.$L=n),r},s.clone=function(){return m.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},a}(),le=se.prototype;return f.prototype=le,[["$ms",x],["$s",E],["$m",D],["$H",g],["$W",F],["$M",p],["$y",L],["$D",u]].forEach(function(a){le[a[1]]=function(s){return this.$g(s,a[0],a[1])}}),f.extend=function(a,s){return a.$i||(a(s,se,f),a.$i=!0),f},f.locale=y,f.isDayjs=d,f.unix=function(a){return f(1e3*a)},f.en=R[C],f.Ls=R,f.p={},f})})(ce);var we=ce.exports;const $e=de(we),{Title:Me}=re;function be(){const[w,c]=H.useState(""),[b,N]=H.useState(null),{data:P,isLoading:x,refetch:E}=M.course.findMany.useQuery({where:{AND:[b==="premium"?{isPremium:!0}:b==="free"?{isPremium:!1}:{},{OR:[{title:{contains:w}},{description:{contains:w}}]}]}}),{mutateAsync:D}=M.course.create.useMutation(),{mutateAsync:g}=M.course.update.useMutation(),{mutateAsync:F}=M.course.delete.useMutation(),[A,p]=H.useState(!1),[O,L]=H.useState(null),[u]=I.useForm(),v=()=>{L(null),u.resetFields(),p(!0)},V=o=>{window.location.href=`/admin/courses/${o.id}/edit`},z=async o=>{try{await F({where:{id:o}}),S.success("Course deleted successfully"),E()}catch{S.error("Failed to delete course")}},T=async()=>{try{const o=await u.validateFields();O?(await g({where:{id:O.id},data:o}),S.success("Course updated successfully")):(await D({data:o}),S.success("Course created successfully")),p(!1),E()}catch{S.error("Failed to save course")}},$=[{title:"Title",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"Price",dataIndex:"price",key:"price",render:o=>`XAF ${o}`},{title:"Premium",dataIndex:"isPremium",key:"isPremium",render:o=>o?"Yes":"No"},{title:"Actions",key:"actions",render:(o,C)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{icon:e.jsx(ue,{}),onClick:()=>V(C),children:"Edit"}),e.jsx(q,{danger:!0,icon:e.jsx(xe,{}),onClick:()=>z(C.id),children:"Delete"})]})}];return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(Me,{level:3,children:"Courses Management"}),e.jsx(q,{type:"primary",icon:e.jsx(fe,{}),onClick:v,children:"Add Course"})]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(W.Search,{placeholder:"Search courses...",onChange:o=>c(o.target.value),style:{width:300}}),e.jsx(Q,{placeholder:"Filter by type",allowClear:!0,style:{width:200},onChange:o=>N(o),options:[{label:"All",value:null},{label:"Free",value:"free"},{label:"Premium",value:"premium"}]})]}),e.jsx(ae,{columns:$,dataSource:P,rowKey:"id",loading:x,pagination:{pageSize:10},scroll:{x:!0}}),e.jsx(ne,{title:O?"Edit Course":"Create Course",open:A,onOk:T,onCancel:()=>p(!1),children:e.jsxs(I,{form:u,layout:"vertical",children:[e.jsx(I.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please input course title!"}],children:e.jsx(W,{})}),e.jsx(I.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input course description!"}],children:e.jsx(W.TextArea,{})}),e.jsx(I.Item,{name:"isPremium",label:"Premium",valuePropName:"checked",children:e.jsx(ye,{})}),e.jsx(I.Item,{name:"price",label:"Price",rules:[{required:!0,message:"Please input course price!"}],children:e.jsx(W,{prefix:"XAF"})})]})})]})}const{Text:J}=re;function ke(){const[w]=I.useForm(),{data:c,refetch:b,isLoading:N,error:P}=M.premiumLink.findFirst.useQuery(void 0,{retry:!1,onError:T=>{console.error("Failed to fetch premium link:",T),S.error("Failed to load premium link data")}}),{data:x,refetch:E,isLoading:D,error:g}=M.affiliateLink.findFirst.useQuery(void 0,{retry:!1,onError:T=>{console.error("Failed to fetch affiliate link:",T),S.error("Failed to load affiliate link data")}}),{mutateAsync:F,isLoading:A}=M.premiumLink.update.useMutation(),{mutateAsync:p,isLoading:O}=M.premiumLink.create.useMutation(),{mutateAsync:L,isLoading:u}=M.affiliateLink.update.useMutation(),{mutateAsync:v,isLoading:V}=M.affiliateLink.create.useMutation(),z=async T=>{const $=async(o,C)=>{if(!o.trim())throw new Error(`URL cannot be empty - please provide a valid ${C} link`);if(!o.startsWith("http://")&&!o.startsWith("https://"))throw new Error("URL must start with http:// or https://");try{new URL(o.trim())}catch{throw new Error("Invalid URL format - must be a complete URL starting with http:// or https://")}let R;return C==="premium"?(c!=null&&c.id?R=await F({where:{id:c.id},data:{url:o.trim()}}):R=await p({data:{url:o.trim()}}),await b()):(x!=null&&x.id?R=await L({where:{id:x.id},data:{url:o.trim()}}):R=await v({data:{url:o.trim()}}),await E()),R};try{const[o,C]=await Promise.all([$(T.premiumUrl,"premium"),$(T.affiliateUrl,"affiliate")]);console.log("Links successfully saved:",{premium:o,affiliate:C}),S.success("Links saved successfully"),w.setFieldsValue({premiumUrl:o.url,affiliateUrl:C.url})}catch(o){console.error("Update links error:",o),S.error(o.message||"Failed to update links")}};return e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-4",children:N?e.jsx(J,{children:"Loading premium link data..."}):P?e.jsx(J,{type:"danger",children:"Error loading premium link data. Please try again."}):(c==null?void 0:c.url)&&e.jsxs(J,{children:["Current Premium Link: ",e.jsx(J,{strong:!0,children:c.url})]})}),e.jsxs(I,{form:w,onFinish:z,layout:"vertical",initialValues:{premiumUrl:c==null?void 0:c.url,affiliateUrl:x==null?void 0:x.url},disabled:N||D,children:[e.jsx(I.Item,{name:"premiumUrl",label:"Payment Link URL",rules:[{required:!0,message:"Payment link URL is required"},{type:"url",message:"Please enter a valid URL starting with http:// or https://"},{validator:async(T,$)=>{if($!=null&&$.trim())try{new URL($)}catch{throw new Error("Invalid URL format")}}}],validateTrigger:["onChange","onBlur"],children:e.jsx(W,{placeholder:"https://example.com/payment"})}),e.jsx(ge,{}),e.jsx("div",{className:"mb-4",children:D?e.jsx(J,{children:"Loading affiliate link data..."}):g?e.jsx(J,{type:"danger",children:"Error loading affiliate link data. Please try again."}):(x==null?void 0:x.url)&&e.jsxs(J,{children:["Current Affiliate Link: ",e.jsx(J,{strong:!0,children:x.url})]})}),e.jsx(I.Item,{name:"affiliateUrl",label:"Affiliate Link URL",rules:[{required:!0,message:"Affiliate link URL is required"},{type:"url",message:"Please enter a valid URL starting with http:// or https://"},{validator:async(T,$)=>{if($!=null&&$.trim())try{new URL($)}catch{throw new Error("Invalid URL format")}}}],validateTrigger:["onChange","onBlur"],children:e.jsx(W,{placeholder:"https://example.com/affiliate"})}),e.jsx(I.Item,{children:e.jsx(q,{type:"primary",htmlType:"submit",loading:A||O||u||V,disabled:A||O||u||V,children:A||O||u||V?"Saving...":"Save Links"})})]})]})}const{Title:Se}=re;function Ce(){const[w]=I.useForm(),[c,b]=H.useState(null),[N,P]=H.useState(!1),{data:x,isLoading:E,refetch:D}=M.skillFeedVideo.findMany.useQuery(),{mutateAsync:g,isLoading:F}=M.skillFeedVideo.create.useMutation(),{mutateAsync:A,isLoading:p}=M.skillFeedVideo.update.useMutation(),O=async u=>{try{c?(await A({where:{id:c.id},data:u}),S.success("Video updated successfully")):(await g({data:u}),S.success("Video created successfully")),P(!1),b(null),w.resetFields(),D()}catch(v){console.error("Create video error:",v),S.error(`Failed to create video: ${v.message}`)}},L=[{title:"Title",dataIndex:"title",key:"title",width:"150px",ellipsis:!0,render:(u,v)=>(c==null?void 0:c.id)===v.id?u:e.jsx("div",{className:"whitespace-normal",children:u.length>60?`${u.slice(0,60)}...`:u})},{title:"Description",dataIndex:"description",key:"description",width:"150px",ellipsis:!0,render:(u,v)=>{const V=u.length>198?`${u.slice(0,198)}...`:u;return e.jsx("div",{className:"whitespace-normal",children:(c==null?void 0:c.id)===v.id?u.slice(0,520):V})}},{title:"Link",dataIndex:"link",key:"link",width:"150px",ellipsis:!0,render:(u,v)=>(c==null?void 0:c.id)===v.id?u:e.jsx("div",{className:"whitespace-normal",children:u.length>198?`${u.slice(0,198)}...`:u})},{title:"Actions",key:"actions",dataIndex:"actions",render:(u,v)=>e.jsx(q,{icon:e.jsx(ue,{}),onClick:()=>{b(v),w.setFieldsValue(v),P(!0)},children:"Edit"})}];return e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx(Se,{level:3,children:"SkillFeed Videos"})}),e.jsx(q,{type:"primary",onClick:()=>{w.resetFields(),b(null),P(!0)},className:"mb-4",children:"Add Video"}),e.jsx(ne,{title:c?"Edit Video":"Add Video",open:N,onCancel:()=>{P(!1),b(null),w.resetFields()},footer:null,children:e.jsxs(I,{form:w,onFinish:O,layout:"vertical",children:[e.jsx(I.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please input video title!"}],children:e.jsx(W,{})}),e.jsx(I.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input video description!"},({getFieldValue:u})=>({validator(v,V){return V&&V.length>520?Promise.reject(new Error("Description must be 520 characters or fewer!")):Promise.resolve()}})],children:e.jsx(W.TextArea,{maxLength:520,showCount:!0,placeholder:"Enter your video description (max 520 characters)"})}),e.jsx(I.Item,{name:"link",label:"Link",rules:[{required:!0,message:"Please input video link!"}],children:e.jsx(W,{})}),e.jsx(I.Item,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(q,{type:"primary",htmlType:"submit",loading:F||p,children:[c?"Update":"Add"," Video"]}),e.jsx(q,{onClick:()=>{P(!1),b(null),w.resetFields()},children:"Cancel"})]})})]})}),e.jsx(ae,{columns:L,dataSource:x,rowKey:"id",loading:E,pagination:{pageSize:10},scroll:{x:!0}})]})}const{Title:Ie}=re;function De(){const[w,c]=H.useState(""),[b,N]=H.useState(null),[P,x]=H.useState(null),[E,D]=H.useState(!1),[g,F]=H.useState(null),{data:A}=M.course.findMany.useQuery({where:{isPremium:!0}}),{data:p,refetch:O}=M.userCourse.findMany.useQuery({where:{userId:g==null?void 0:g.id},include:{course:!0}},{enabled:!!(g!=null&&g.id)}),{mutateAsync:L}=M.userCourse.create.useMutation(),{mutateAsync:u}=M.userCourse.delete.useMutation(),{data:v,isLoading:V,refetch:z}=M.user.findMany.useQuery({where:{AND:[b?{globalRole:b}:{},P?{status:P}:{},{OR:[{name:{contains:w}},{email:{contains:w}}]}]}}),{mutateAsync:T}=M.user.update.useMutation(),{mutateAsync:$}=M.user.delete.useMutation(),o=async(d,y)=>{try{await T({where:{id:d},data:{status:y}}),S.success("User status updated successfully"),z()}catch{S.error("Failed to update user status")}},C=async(d,y)=>{try{await T({where:{id:d},data:{globalRole:y}}),S.success("User role updated successfully"),z()}catch{S.error("Failed to update user role")}},R=async d=>{try{await $({where:{id:d}}),S.success("User deleted successfully"),z()}catch{S.error("Failed to delete user")}},G=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Status",dataIndex:"status",key:"status",render:(d,y)=>e.jsxs(Q,{value:d,onChange:f=>o(y.id,f),style:{width:120},children:[e.jsx(Q.Option,{value:"INVITED",children:"Invited"}),e.jsx(Q.Option,{value:"VERIFIED",children:"Verified"})]})},{title:"Role",dataIndex:"globalRole",key:"globalRole",render:(d,y)=>e.jsxs(Q,{value:d,onChange:f=>C(y.id,f),style:{width:120},children:[e.jsx(Q.Option,{value:"USER",children:"User"}),e.jsx(Q.Option,{value:"PREMIUM",children:"Premium"}),e.jsx(Q.Option,{value:"ADMIN",children:"Admin"})]})},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:d=>$e(d).format("YYYY-MM-DD HH:mm")},{title:"Actions",key:"actions",render:(d,y)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{onClick:()=>{F(y),D(!0)},children:"Courses"}),e.jsx(q,{onClick:()=>o(y.id,y.status==="VERIFIED"?"INVITED":"VERIFIED"),children:y.status==="VERIFIED"?"Suspend":"Activate"}),e.jsx(q,{danger:!0,onClick:()=>R(y.id),children:"Delete"})]})}];return e.jsxs("div",{className:"p-4",children:[e.jsx(Ie,{level:3,children:"Users Management"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(Q,{placeholder:"Filter by role",allowClear:!0,style:{width:200},onChange:d=>N(d),options:[{label:"User",value:"USER"},{label:"Premium",value:"PREMIUM"},{label:"Admin",value:"ADMIN"}]}),e.jsx(Q,{placeholder:"Filter by status",allowClear:!0,style:{width:200},onChange:d=>x(d),options:[{label:"Invited",value:"INVITED"},{label:"Verified",value:"VERIFIED"}]})]}),e.jsx(W.Search,{placeholder:"Search by name or email",onChange:d=>c(d.target.value),className:"mb-4",allowClear:!0}),e.jsx(ae,{columns:G,dataSource:v,rowKey:"id",loading:V,pagination:{pageSize:10},scroll:{x:!0}}),e.jsx(ne,{title:"Manage User Courses",open:E,onCancel:()=>D(!1),footer:null,children:A==null?void 0:A.map(d=>e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{children:d.title}),e.jsx(Q,{value:p==null?void 0:p.some(y=>y.courseId===d.id),onChange:async y=>{y?await L({data:{courseId:d.id,userId:g.id}}):await u({where:{courseId:d.id,userId:g.id}}),O()},options:[{label:"Yes",value:!0},{label:"No",value:!1}]})]},d.id))})]})}const{Title:oe}=re;function ct(){const{checkRole:w}=he(),c=ve();H.useEffect(()=>{w("ADMIN")||c("/skillfeed")},[w]);const b=[{key:"users",label:"Users",children:e.jsx(De,{})},{key:"premium",label:"Premium Upgrade",children:e.jsx(ke,{})},{key:"courses",label:"Courses",children:e.jsx(be,{})},{key:"skillfeed",label:"Skillfeed",children:e.jsxs("div",{children:[e.jsx(oe,{level:3,children:"Skillfeed Management"}),e.jsx(Ce,{})]})}];return e.jsx(je,{layout:"full-width",children:e.jsxs("div",{className:"p-4",children:[e.jsx(oe,{level:2,children:"Admin Control Panel"}),e.jsx(pe,{items:b})]})})}export{ct as default};
