import{r as C,R as Fe,j as Ue}from"./index-Bhhhx7h4.js";class N{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const $=typeof window>"u"||"Deno"in window;function I(){}function zt(t,e){return typeof t=="function"?t(e):t}function me(t){return typeof t=="number"&&t>=0&&t!==1/0}function ke(t,e){return t.filter(r=>!e.includes(r))}function Vt(t,e,r){const n=t.slice(0);return n[e]=r,n}function Je(t,e){return Math.max(t+(e||0)-Date.now(),0)}function j(t,e,r){return Z(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function $t(t,e,r){return Z(t)?{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function U(t,e,r){return Z(t)?[{...e,queryKey:t},r]:[t||{},e]}function Ke(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:u,stale:a}=t;if(Z(u)){if(n){if(e.queryHash!==qe(u,e.options))return!1}else if(!ee(e.queryKey,u))return!1}if(r!=="all"){const o=e.isActive();if(r==="active"&&!o||r==="inactive"&&o)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof s<"u"&&s!==e.state.fetchStatus||i&&!i(e))}function Ne(t,e){const{exact:r,fetching:n,predicate:s,mutationKey:i}=t;if(Z(i)){if(!e.options.mutationKey)return!1;if(r){if(k(e.options.mutationKey)!==k(i))return!1}else if(!ee(e.options.mutationKey,i))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||s&&!s(e))}function qe(t,e){return((e==null?void 0:e.queryKeyHashFn)||k)(t)}function k(t){return JSON.stringify(t,(e,r)=>be(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ee(t,e){return et(t,e)}function et(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!et(t[r],e[r])):!1}function tt(t,e){if(t===e)return t;const r=Le(t)&&Le(e);if(r||be(t)&&be(e)){const n=r?t.length:Object.keys(t).length,s=r?e:Object.keys(e),i=s.length,u=r?[]:{};let a=0;for(let o=0;o<i;o++){const c=r?o:s[o];u[c]=tt(t[c],e[c]),u[c]===t[c]&&a++}return n===i&&a===n?t:u}return e}function te(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Le(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function be(t){if(!je(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!je(r)||!r.hasOwnProperty("isPrototypeOf"))}function je(t){return Object.prototype.toString.call(t)==="[object Object]"}function Z(t){return Array.isArray(t)}function rt(t){return new Promise(e=>{setTimeout(e,t)})}function Be(t){rt(0).then(t)}function Gt(){if(typeof AbortController=="function")return new AbortController}function ve(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?tt(t,e):e}class Wt extends N{constructor(){super(),this.setup=e=>{if(!$&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const re=new Wt,He=["online","offline"];class Yt extends N{constructor(){super(),this.setup=e=>{if(!$&&window.addEventListener){const r=()=>e();return He.forEach(n=>{window.addEventListener(n,r,!1)}),()=>{He.forEach(n=>{window.removeEventListener(n,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const ne=new Yt;function Zt(t){return Math.min(1e3*2**t,3e4)}function ue(t){return(t??"online")==="online"?ne.isOnline():!0}class nt{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function X(t){return t instanceof nt}function st(t){let e=!1,r=0,n=!1,s,i,u;const a=new Promise((y,p)=>{i=y,u=p}),o=y=>{n||(h(new nt(y)),t.abort==null||t.abort())},c=()=>{e=!0},d=()=>{e=!1},g=()=>!re.isFocused()||t.networkMode!=="always"&&!ne.isOnline(),m=y=>{n||(n=!0,t.onSuccess==null||t.onSuccess(y),s==null||s(),i(y))},h=y=>{n||(n=!0,t.onError==null||t.onError(y),s==null||s(),u(y))},f=()=>new Promise(y=>{s=p=>{const P=n||!g();return P&&y(p),P},t.onPause==null||t.onPause()}).then(()=>{s=void 0,n||t.onContinue==null||t.onContinue()}),l=()=>{if(n)return;let y;try{y=t.fn()}catch(p){y=Promise.reject(p)}Promise.resolve(y).then(m).catch(p=>{var P,w;if(n)return;const E=(P=t.retry)!=null?P:3,O=(w=t.retryDelay)!=null?w:Zt,b=typeof O=="function"?O(r,p):O,v=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,p);if(e||!v){h(p);return}r++,t.onFail==null||t.onFail(r,p),rt(b).then(()=>{if(g())return f()}).then(()=>{e?h(p):l()})})};return ue(t.networkMode)?l():f().then(l),{promise:a,cancel:o,continue:()=>(s==null?void 0:s())?a:Promise.resolve(),cancelRetry:c,continueRetry:d}}const xe=console;function Xt(){let t=[],e=0,r=d=>{d()},n=d=>{d()};const s=d=>{let g;e++;try{g=d()}finally{e--,e||a()}return g},i=d=>{e?t.push(d):Be(()=>{r(d)})},u=d=>(...g)=>{i(()=>{d(...g)})},a=()=>{const d=t;t=[],d.length&&Be(()=>{n(()=>{d.forEach(g=>{r(g)})})})};return{batch:s,batchCalls:u,schedule:i,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d}}}const q=Xt();class it{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),me(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??($?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Jt extends it{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||xe,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||er(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const n=ve(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(e),n?n.then(I).catch(I):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Je(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var n,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const u=Gt(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},o=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(u)return this.abortSignalConsumed=!0,u.signal}})};o(a);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),d={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(o(d),(n=this.options.behavior)==null||n.onFetch(d),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=d.fetchOptions)==null?void 0:s.meta)){var g;this.dispatch({type:"fetch",meta:(g=d.fetchOptions)==null?void 0:g.meta})}const m=h=>{if(X(h)&&h.silent||this.dispatch({type:"error",error:h}),!X(h)){var f,l,y,p;(f=(l=this.cache.config).onError)==null||f.call(l,h,this),(y=(p=this.cache.config).onSettled)==null||y.call(p,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=st({fn:d.fetchFn,abort:u==null?void 0:u.abort.bind(u),onSuccess:h=>{var f,l,y,p;if(typeof h>"u"){m(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(f=(l=this.cache.config).onSuccess)==null||f.call(l,h,this),(y=(p=this.cache.config).onSettled)==null||y.call(p,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:m,onFail:(h,f)=>{this.dispatch({type:"failed",failureCount:h,error:f})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=n=>{var s,i;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:ue(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=e.error;return X(u)&&u.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...n,error:u,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),q.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function er(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class tr extends N{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,n){var s;const i=r.queryKey,u=(s=r.queryHash)!=null?s:qe(i,r);let a=this.get(u);return a||(a=new Jt({cache:this,logger:e.getLogger(),queryKey:i,queryHash:u,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){q.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[n]=U(e,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(s=>Ke(n,s))}findAll(e,r){const[n]=U(e,r);return Object.keys(n).length>0?this.queries.filter(s=>Ke(n,s)):this.queries}notify(e){q.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){q.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){q.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class rr extends it{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||xe,this.observers=[],this.state=e.state||ut(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var v;return this.retryer=st({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(R,Q)=>{this.dispatch({type:"failed",failureCount:R,error:Q})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(v=this.options.retry)!=null?v:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var n,s,i,u,a,o,c,d;if(!r){var g,m,h,f;this.dispatch({type:"loading",variables:this.options.variables}),await((g=(m=this.mutationCache.config).onMutate)==null?void 0:g.call(m,this.state.variables,this));const R=await((h=(f=this.options).onMutate)==null?void 0:h.call(f,this.state.variables));R!==this.state.context&&this.dispatch({type:"loading",context:R,variables:this.state.variables})}const v=await e();return await((n=(s=this.mutationCache.config).onSuccess)==null?void 0:n.call(s,v,this.state.variables,this.state.context,this)),await((i=(u=this.options).onSuccess)==null?void 0:i.call(u,v,this.state.variables,this.state.context)),await((a=(o=this.mutationCache.config).onSettled)==null?void 0:a.call(o,v,null,this.state.variables,this.state.context,this)),await((c=(d=this.options).onSettled)==null?void 0:c.call(d,v,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:v}),v}catch(v){try{var l,y,p,P,w,E,O,b;throw await((l=(y=this.mutationCache.config).onError)==null?void 0:l.call(y,v,this.state.variables,this.state.context,this)),await((p=(P=this.options).onError)==null?void 0:p.call(P,v,this.state.variables,this.state.context)),await((w=(E=this.mutationCache.config).onSettled)==null?void 0:w.call(E,void 0,v,this.state.variables,this.state.context,this)),await((O=(b=this.options).onSettled)==null?void 0:O.call(b,void 0,v,this.state.variables,this.state.context)),v}finally{this.dispatch({type:"error",error:v})}}}dispatch(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!ue(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}};this.state=r(this.state),q.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function ut(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class nr extends N{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,n){const s=new rr({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){q.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>Ne(e,r))}findAll(e){return this.mutations.filter(r=>Ne(e,r))}notify(e){q.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return q.batch(()=>r.reduce((n,s)=>n.then(()=>s.continue().catch(I)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function ge(){return{onFetch:t=>{t.fetchFn=()=>{var e,r,n,s,i,u;const a=(e=t.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,o=(n=t.fetchOptions)==null||(s=n.meta)==null?void 0:s.fetchMore,c=o==null?void 0:o.pageParam,d=(o==null?void 0:o.direction)==="forward",g=(o==null?void 0:o.direction)==="backward",m=((i=t.state.data)==null?void 0:i.pages)||[],h=((u=t.state.data)==null?void 0:u.pageParams)||[];let f=h,l=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>{var v;if((v=t.signal)!=null&&v.aborted)l=!0;else{var R;(R=t.signal)==null||R.addEventListener("abort",()=>{l=!0})}return t.signal}})},p=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),P=(b,v,R,Q)=>(f=Q?[v,...f]:[...f,v],Q?[R,...b]:[...b,R]),w=(b,v,R,Q)=>{if(l)return Promise.reject("Cancelled");if(typeof R>"u"&&!v&&b.length)return Promise.resolve(b);const T={queryKey:t.queryKey,pageParam:R,meta:t.options.meta};y(T);const A=p(T);return Promise.resolve(A).then(L=>P(b,R,L,Q))};let E;if(!m.length)E=w([]);else if(d){const b=typeof c<"u",v=b?c:Re(t.options,m);E=w(m,b,v)}else if(g){const b=typeof c<"u",v=b?c:ot(t.options,m);E=w(m,b,v,!0)}else{f=[];const b=typeof t.options.getNextPageParam>"u";E=(a&&m[0]?a(m[0],0,m):!0)?w([],b,h[0]):Promise.resolve(P([],h[0],m[0]));for(let R=1;R<m.length;R++)E=E.then(Q=>{if(a&&m[R]?a(m[R],R,m):!0){const A=b?h[R]:Re(t.options,Q);return w(Q,b,A)}return Promise.resolve(P(Q,h[R],m[R]))})}return E.then(b=>({pages:b,pageParams:f}))}}}}function Re(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function ot(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}function sr(t,e){if(t.getNextPageParam&&Array.isArray(e)){const r=Re(t,e);return typeof r<"u"&&r!==null&&r!==!1}}function ir(t,e){if(t.getPreviousPageParam&&Array.isArray(e)){const r=ot(t,e);return typeof r<"u"&&r!==null&&r!==!1}}class ur{constructor(e={}){this.queryCache=e.queryCache||new tr,this.mutationCache=e.mutationCache||new nr,this.logger=e.logger||xe,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=re.subscribe(()=>{re.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=ne.subscribe(()=>{ne.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[n]=U(e,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state.data}ensureQueryData(e,r,n){const s=j(e,r,n),i=this.getQueryData(s.queryKey);return i?Promise.resolve(i):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:n})=>{const s=n.data;return[r,s]})}setQueryData(e,r,n){const s=this.queryCache.find(e),i=s==null?void 0:s.state.data,u=zt(r,i);if(typeof u>"u")return;const a=j(e),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(u,{...n,manual:!0})}setQueriesData(e,r,n){return q.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,r,n)]))}getQueryState(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state}removeQueries(e,r){const[n]=U(e,r),s=this.queryCache;q.batch(()=>{s.findAll(n).forEach(i=>{s.remove(i)})})}resetQueries(e,r,n){const[s,i]=U(e,r,n),u=this.queryCache,a={type:"active",...s};return q.batch(()=>(u.findAll(s).forEach(o=>{o.reset()}),this.refetchQueries(a,i)))}cancelQueries(e,r,n){const[s,i={}]=U(e,r,n);typeof i.revert>"u"&&(i.revert=!0);const u=q.batch(()=>this.queryCache.findAll(s).map(a=>a.cancel(i)));return Promise.all(u).then(I).catch(I)}invalidateQueries(e,r,n){const[s,i]=U(e,r,n);return q.batch(()=>{var u,a;if(this.queryCache.findAll(s).forEach(c=>{c.invalidate()}),s.refetchType==="none")return Promise.resolve();const o={...s,type:(u=(a=s.refetchType)!=null?a:s.type)!=null?u:"active"};return this.refetchQueries(o,i)})}refetchQueries(e,r,n){const[s,i]=U(e,r,n),u=q.batch(()=>this.queryCache.findAll(s).filter(o=>!o.isDisabled()).map(o=>{var c;return o.fetch(void 0,{...i,cancelRefetch:(c=i==null?void 0:i.cancelRefetch)!=null?c:!0,meta:{refetchPage:s.refetchPage}})}));let a=Promise.all(u).then(I);return i!=null&&i.throwOnError||(a=a.catch(I)),a}fetchQuery(e,r,n){const s=j(e,r,n),i=this.defaultQueryOptions(s);typeof i.retry>"u"&&(i.retry=!1);const u=this.queryCache.build(this,i);return u.isStaleByTime(i.staleTime)?u.fetch(i):Promise.resolve(u.state.data)}prefetchQuery(e,r,n){return this.fetchQuery(e,r,n).then(I).catch(I)}fetchInfiniteQuery(e,r,n){const s=j(e,r,n);return s.behavior=ge(),this.fetchQuery(s)}prefetchInfiniteQuery(e,r,n){return this.fetchInfiniteQuery(e,r,n).then(I).catch(I)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const n=this.queryDefaults.find(s=>k(e)===k(s.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(n=>ee(e,n.queryKey));return r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const n=this.mutationDefaults.find(s=>k(e)===k(s.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(n=>ee(e,n.mutationKey));return r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=qe(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class Te extends N{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),_e(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Oe(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Oe(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const n=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),te(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const i=this.hasListeners();i&&ze(this.currentQuery,s,this.options,n)&&this.executeFetch(),this.updateResult(r),i&&(this.currentQuery!==s||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const u=this.computeRefetchInterval();i&&(this.currentQuery!==s||this.options.enabled!==n.enabled||u!==this.currentRefetchInterval)&&this.updateRefetchInterval(u)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),n=this.createResult(r,e);return ar(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(I)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),$||this.currentResult.isStale||!me(this.options.staleTime))return;const r=Je(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!($||this.options.enabled===!1||!me(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||re.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const n=this.currentQuery,s=this.options,i=this.currentResult,u=this.currentResultState,a=this.currentResultOptions,o=e!==n,c=o?e.state:this.currentQueryInitialState,d=o?this.currentResult:this.previousQueryResult,{state:g}=e;let{dataUpdatedAt:m,error:h,errorUpdatedAt:f,fetchStatus:l,status:y}=g,p=!1,P=!1,w;if(r._optimisticResults){const R=this.hasListeners(),Q=!R&&_e(e,r),T=R&&ze(e,n,r,s);(Q||T)&&(l=ue(e.options.networkMode)?"fetching":"paused",m||(y="loading")),r._optimisticResults==="isRestoring"&&(l="idle")}if(r.keepPreviousData&&!g.dataUpdatedAt&&d!=null&&d.isSuccess&&y!=="error")w=d.data,m=d.dataUpdatedAt,y=d.status,p=!0;else if(r.select&&typeof g.data<"u")if(i&&g.data===(u==null?void 0:u.data)&&r.select===this.selectFn)w=this.selectResult;else try{this.selectFn=r.select,w=r.select(g.data),w=ve(i==null?void 0:i.data,w,r),this.selectResult=w,this.selectError=null}catch(R){this.selectError=R}else w=g.data;if(typeof r.placeholderData<"u"&&typeof w>"u"&&y==="loading"){let R;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))R=i.data;else if(R=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof R<"u")try{R=r.select(R),this.selectError=null}catch(Q){this.selectError=Q}typeof R<"u"&&(y="success",w=ve(i==null?void 0:i.data,R,r),P=!0)}this.selectError&&(h=this.selectError,w=this.selectResult,f=Date.now(),y="error");const E=l==="fetching",O=y==="loading",b=y==="error";return{status:y,fetchStatus:l,isLoading:O,isSuccess:y==="success",isError:b,isInitialLoading:O&&E,data:w,dataUpdatedAt:m,error:h,errorUpdatedAt:f,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>c.dataUpdateCount||g.errorUpdateCount>c.errorUpdateCount,isFetching:E,isRefetching:E&&!O,isLoadingError:b&&g.dataUpdatedAt===0,isPaused:l==="paused",isPlaceholderData:P,isPreviousData:p,isRefetchError:b&&g.dataUpdatedAt!==0,isStale:Ie(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,te(n,r))return;this.currentResult=n;const s={cache:!0},i=()=>{if(!r)return!0;const{notifyOnChangeProps:u}=this.options,a=typeof u=="function"?u():u;if(a==="all"||!a&&!this.trackedProps.size)return!0;const o=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&o.add("error"),Object.keys(this.currentResult).some(c=>{const d=c;return this.currentResult[d]!==r[d]&&o.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!X(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){q.batch(()=>{if(e.onSuccess){var r,n,s,i;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(s=(i=this.options).onSettled)==null||s.call(i,this.currentResult.data,null)}else if(e.onError){var u,a,o,c;(u=(a=this.options).onError)==null||u.call(a,this.currentResult.error),(o=(c=this.options).onSettled)==null||o.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function or(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function _e(t,e){return or(t,e)||t.state.dataUpdatedAt>0&&Oe(t,e,e.refetchOnMount)}function Oe(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Ie(t,e)}return!1}function ze(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&Ie(t,r)}function Ie(t,e){return t.isStaleByTime(e.staleTime)}function ar(t,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:!te(t.getCurrentResult(),e)}class cr extends N{constructor(e,r){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},r&&this.setQueries(r)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(r=>{this.onUpdate(e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,r){this.queries=e,q.batch(()=>{const n=this.observers,s=this.findMatchingObservers(this.queries);s.forEach(c=>c.observer.setOptions(c.defaultedQueryOptions,r));const i=s.map(c=>c.observer),u=Object.fromEntries(i.map(c=>[c.options.queryHash,c])),a=i.map(c=>c.getCurrentResult()),o=i.some((c,d)=>c!==n[d]);n.length===i.length&&!o||(this.observers=i,this.observersMap=u,this.result=a,this.hasListeners()&&(ke(n,i).forEach(c=>{c.destroy()}),ke(i,n).forEach(c=>{c.subscribe(d=>{this.onUpdate(c,d)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(r=>r.observer.getOptimisticResult(r.defaultedQueryOptions))}findMatchingObservers(e){const r=this.observers,n=new Map(r.map(h=>[h.options.queryHash,h])),s=e.map(h=>this.client.defaultQueryOptions(h)),i=s.flatMap(h=>{const f=n.get(h.queryHash);return f!=null?[{defaultedQueryOptions:h,observer:f}]:[]}),u=new Set(i.map(h=>h.defaultedQueryOptions.queryHash)),a=s.filter(h=>!u.has(h.queryHash)),o=new Set(i.map(h=>h.observer)),c=r.filter(h=>!o.has(h)),d=h=>{const f=this.client.defaultQueryOptions(h),l=this.observersMap[f.queryHash];return l??new Te(this.client,f)},g=a.map((h,f)=>{if(h.keepPreviousData){const l=c[f];if(l!==void 0)return{defaultedQueryOptions:h,observer:l}}return{defaultedQueryOptions:h,observer:d(h)}}),m=(h,f)=>s.indexOf(h.defaultedQueryOptions)-s.indexOf(f.defaultedQueryOptions);return i.concat(g).sort(m)}onUpdate(e,r){const n=this.observers.indexOf(e);n!==-1&&(this.result=Vt(this.result,n,r),this.notify())}notify(){q.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}class lr extends Te{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,r){super.setOptions({...e,behavior:ge()},r)}getOptimisticResult(e){return e.behavior=ge(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...r}={}){return this.fetch({...r,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...r}={}){return this.fetch({...r,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,r){var n,s,i,u,a,o;const{state:c}=e,d=super.createResult(e,r),{isFetching:g,isRefetching:m}=d,h=g&&((n=c.fetchMeta)==null||(s=n.fetchMore)==null?void 0:s.direction)==="forward",f=g&&((i=c.fetchMeta)==null||(u=i.fetchMore)==null?void 0:u.direction)==="backward";return{...d,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:sr(r,(a=c.data)==null?void 0:a.pages),hasPreviousPage:ir(r,(o=c.data)==null?void 0:o.pages),isFetchingNextPage:h,isFetchingPreviousPage:f,isRefetching:m&&!h&&!f}}}class fr extends N{constructor(e,r){super(),this.client=e,this.setOptions(r),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const n=this.options;this.options=this.client.defaultMutationOptions(e),te(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(r=this.currentMutation)==null||r.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const r={listeners:!0};e.type==="success"?r.onSuccess=!0:e.type==="error"&&(r.onError=!0),this.notify(r)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,r){return this.mutateOptions=r,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:ut(),r={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=r}notify(e){q.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var r,n,s,i;(r=(n=this.mutateOptions).onSuccess)==null||r.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(i=this.mutateOptions).onSettled)==null||s.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var u,a,o,c;(u=(a=this.mutateOptions).onError)==null||u.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(o=(c=this.mutateOptions).onSettled)==null||o.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)})})}}var at={exports:{}},ct={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=C;function hr(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:hr,yr=H.useState,pr=H.useEffect,mr=H.useLayoutEffect,br=H.useDebugValue;function vr(t,e){var r=e(),n=yr({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return mr(function(){s.value=r,s.getSnapshot=e,le(s)&&i({inst:s})},[t,r,e]),pr(function(){return le(s)&&i({inst:s}),t(function(){le(s)&&i({inst:s})})},[t]),br(r),r}function le(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!dr(t,r)}catch{return!0}}function gr(t,e){return e()}var Rr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gr:vr;ct.useSyncExternalStore=H.useSyncExternalStore!==void 0?H.useSyncExternalStore:Rr;at.exports=ct;var Or=at.exports;const De=Or.useSyncExternalStore,Ve=C.createContext(void 0),lt=C.createContext(!1);function ft(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Ve),window.ReactQueryClientContext):Ve)}const oe=({context:t}={})=>{const e=C.useContext(ft(t,C.useContext(lt)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},wr=({client:t,children:e,context:r,contextSharing:n=!1})=>{C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const s=ft(r,n);return C.createElement(lt.Provider,{value:!r&&n},C.createElement(s.Provider,{value:t},e))},ht=C.createContext(!1),dt=()=>C.useContext(ht);ht.Provider;function Cr(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const Pr=C.createContext(Cr()),yt=()=>C.useContext(Pr);function pt(t,e){return typeof t=="function"?t(...e):!!t}const mt=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},bt=t=>{C.useEffect(()=>{t.clearReset()},[t])},vt=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&pt(r,[t.error,n]),gt=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Rt=(t,e)=>t.isLoading&&t.isFetching&&!e,we=(t,e,r)=>(t==null?void 0:t.suspense)&&Rt(e,r),Ce=(t,e,r)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{r.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function Er({queries:t,context:e}){const r=oe({context:e}),n=dt(),s=yt(),i=C.useMemo(()=>t.map(m=>{const h=r.defaultQueryOptions(m);return h._optimisticResults=n?"isRestoring":"optimistic",h}),[t,r,n]);i.forEach(m=>{gt(m),mt(m,s)}),bt(s);const[u]=C.useState(()=>new cr(r,i)),a=u.getOptimisticResult(i);De(C.useCallback(m=>n?()=>{}:u.subscribe(q.batchCalls(m)),[u,n]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),C.useEffect(()=>{u.setQueries(i,{listeners:!1})},[i,u]);const c=a.some((m,h)=>we(i[h],m,n))?a.flatMap((m,h)=>{const f=i[h],l=u.getObservers()[h];if(f&&l){if(we(f,m,n))return Ce(f,l,s);Rt(m,n)&&Ce(f,l,s)}return[]}):[];if(c.length>0)throw Promise.all(c);const d=u.getQueries(),g=a.find((m,h)=>{var f,l;return vt({result:m,errorResetBoundary:s,useErrorBoundary:(f=(l=i[h])==null?void 0:l.useErrorBoundary)!=null?f:!1,query:d[h]})});if(g!=null&&g.error)throw g.error;return a}function Ot(t,e){const r=oe({context:t.context}),n=dt(),s=yt(),i=r.defaultQueryOptions(t);i._optimisticResults=n?"isRestoring":"optimistic",i.onError&&(i.onError=q.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=q.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=q.batchCalls(i.onSettled)),gt(i),mt(i,s),bt(s);const[u]=C.useState(()=>new e(r,i)),a=u.getOptimisticResult(i);if(De(C.useCallback(o=>{const c=n?()=>{}:u.subscribe(q.batchCalls(o));return u.updateResult(),c},[u,n]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),C.useEffect(()=>{u.setOptions(i,{listeners:!1})},[i,u]),we(i,a,n))throw Ce(i,u,s);if(vt({result:a,errorResetBoundary:s,useErrorBoundary:i.useErrorBoundary,query:u.getCurrentQuery()}))throw a.error;return i.notifyOnChangeProps?a:u.trackResult(a)}function Sr(t,e,r){const n=j(t,e,r);return Ot(n,Te)}function Qr(t,e,r){const n=$t(t,e),s=oe({context:n.context}),[i]=C.useState(()=>new fr(s,n));C.useEffect(()=>{i.setOptions(n)},[i,n]);const u=De(C.useCallback(o=>i.subscribe(q.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=C.useCallback((o,c)=>{i.mutate(o,c).catch(qr)},[i]);if(u.error&&pt(i.options.useErrorBoundary,[u.error]))throw u.error;return{...u,mutate:a,mutateAsync:u.mutate}}function qr(){}function xr(t,e,r){const n=j(t,e,r);return Ot(n,lr)}function Tr(t){return t}function Ir(t){return t.length===0?Tr:t.length===1?t[0]:function(r){return t.reduce((n,s)=>s(n),r)}}function wt(t){const e={subscribe(r){let n=null,s=!1,i=!1,u=!1;function a(){if(n===null){u=!0;return}i||(i=!0,typeof n=="function"?n():n&&n.unsubscribe())}return n=t({next(o){var c;s||(c=r.next)==null||c.call(r,o)},error(o){var c;s||(s=!0,(c=r.error)==null||c.call(r,o),a())},complete(){var o;s||(s=!0,(o=r.complete)==null||o.call(r),a())}}),u&&a(),{unsubscribe:a}},pipe(...r){return Ir(r)(e)}};return e}function Dr(t){return e=>{let r=0,n=null;const s=[];function i(){n||(n=e.subscribe({next(a){var o;for(const c of s)(o=c.next)==null||o.call(c,a)},error(a){var o;for(const c of s)(o=c.error)==null||o.call(c,a)},complete(){var a;for(const o of s)(a=o.complete)==null||a.call(o)}}))}function u(){if(r===0&&n){const a=n;n=null,a.unsubscribe()}}return{subscribe(a){return r++,s.push(a),i(),{unsubscribe(){r--,u();const o=s.findIndex(c=>c===a);o>-1&&s.splice(o,1)}}}}}}class Me extends Error{constructor(e){super(e),this.name="ObservableAbortError",Object.setPrototypeOf(this,Me.prototype)}}function Mr(t){let e;return{promise:new Promise((n,s)=>{let i=!1;function u(){i||(i=!0,s(new Me("This operation was aborted.")),a.unsubscribe())}const a=t.subscribe({next(o){i=!0,n(o),u()},error(o){i=!0,s(o),u()},complete(){i=!0,u()}});e=u}),abort:e}}function Ar(t){return wt(e=>{function r(s=0,i=t.op){const u=t.links[s];if(!u)throw new Error("No more links to execute - did you forget to add an ending link?");return u({op:i,next(o){return r(s+1,o)}})}return r().subscribe(e)})}function Ct(t){const e=Object.create(null);for(const r in t){const n=t[r];e[n]=r}return e}const Pt={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};Ct(Pt);Ct(Pt);const Et=()=>{};function St(t,e){return new Proxy(Et,{get(n,s){if(!(typeof s!="string"||s==="then"))return St(t,[...e,s])},apply(n,s,i){const u=e[e.length-1]==="apply";return t({args:u?i.length>=2?i[1]:[]:i,path:u?e.slice(0,-1):e})}})}const ae=t=>St(t,[]),Ae=t=>new Proxy(Et,{get(e,r){if(!(typeof r!="string"||r==="then"))return t(r)}});function Fr(t){return!!t&&!Array.isArray(t)&&typeof t=="object"}class Ur extends Error{}function kr(t){if(t instanceof Error)return t;const e=typeof t;if(!(e==="undefined"||e==="function"||t===null)){if(e!=="object")return new Error(String(t));if(Fr(t)){const r=new Ur;for(const n in t)r[n]=t[n];return r}}}function se(t){return!!t&&!Array.isArray(t)&&typeof t=="object"}function Kr(t,e){if("error"in t){const n=e.transformer.deserialize(t.error);return{ok:!1,error:{...t,error:n}}}return{ok:!0,result:{...t.result,...(!t.result.type||t.result.type==="data")&&{type:"data",data:e.transformer.deserialize(t.result.data)}}}}class fe extends Error{constructor(){super("Unable to transform response from server")}}function Nr(t,e){let r;try{r=Kr(t,e)}catch{throw new fe}if(!r.ok&&(!se(r.error.error)||typeof r.error.error.code!="number"))throw new fe;if(r.ok&&!se(r.result))throw new fe;return r}function Lr(t){return t instanceof M||t instanceof Error&&t.name==="TRPCClientError"}function jr(t){return se(t)&&se(t.error)&&typeof t.error.code=="number"&&typeof t.error.message=="string"}class M extends Error{static from(e,r={}){const n=e;return Lr(n)?(r.meta&&(n.meta={...n.meta,...r.meta}),n):jr(n)?new M(n.error.message,{...r,result:n}):n instanceof Error?new M(n.message,{...r,cause:kr(n)}):new M("Unknown error",{...r,cause:n})}constructor(e,r){var s,i;const n=r==null?void 0:r.cause;super(e,{cause:n}),this.meta=r==null?void 0:r.meta,this.cause=n,this.shape=(s=r==null?void 0:r.result)==null?void 0:s.error,this.data=(i=r==null?void 0:r.result)==null?void 0:i.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,M.prototype)}}const $e=t=>typeof t=="function";function Br(t){if(t)return t;if(typeof window<"u"&&$e(window.fetch))return window.fetch;if(typeof globalThis<"u"&&$e(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function Hr(t){return t||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function _r(t){return{url:t.url.toString().replace(/\/$/,""),fetch:t.fetch,AbortController:Hr(t.AbortController)}}function zr(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[r]=n}return e}const Vr={query:"GET",mutation:"POST"};function Qt(t){return"input"in t?t.runtime.transformer.serialize(t.input):zr(t.inputs.map(e=>t.runtime.transformer.serialize(e)))}const qt=t=>{let e=t.url+"/"+t.path;const r=[];if("inputs"in t&&r.push("batch=1"),t.type==="query"){const n=Qt(t);n!==void 0&&r.push(`input=${encodeURIComponent(JSON.stringify(n))}`)}return r.length&&(e+="?"+r.join("&")),e},$r=t=>{if(t.type==="query")return;const e=Qt(t);return e!==void 0?JSON.stringify(e):void 0},Gr=t=>Yr({...t,contentTypeHeader:"application/json",getUrl:qt,getBody:$r});async function Wr(t,e){const r=t.getUrl(t),n=t.getBody(t),{type:s}=t,i=await t.headers();/* istanbul ignore if -- @preserve */if(s==="subscription")throw new Error("Subscriptions should use wsLink");const u={...t.contentTypeHeader?{"content-type":t.contentTypeHeader}:{},...t.batchModeHeader?{"trpc-batch-mode":t.batchModeHeader}:{},...i};return Br(t.fetch)(r,{method:Vr[s],signal:e==null?void 0:e.signal,body:n,headers:u})}function Yr(t){const e=t.AbortController?new t.AbortController:null,r={};let n=!1;return{promise:new Promise((u,a)=>{Wr(t,e).then(o=>(r.response=o,n=!0,o.json())).then(o=>{r.responseJSON=o,u({json:o,meta:r})}).catch(o=>{n=!0,a(M.from(o,{meta:r}))})}),cancel:()=>{n||e==null||e.abort()}}}const he=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function de(t){let e=null,r=null;const n=()=>{clearTimeout(r),r=null,e=null};function s(a){var d,g;const o=[[]];let c=0;for(;;){const m=a[c];if(!m)break;const h=o[o.length-1];if(m.aborted){(d=m.reject)==null||d.call(m,new Error("Aborted")),c++;continue}if(t.validate(h.concat(m).map(l=>l.key))){h.push(m),c++;continue}if(h.length===0){(g=m.reject)==null||g.call(m,new Error("Input is too big for a single dispatch")),c++;continue}o.push([])}return o}function i(){const a=s(e);n();for(const o of a){if(!o.length)continue;const c={items:o,cancel:he};for(const h of o)h.batch=c;const d=(h,f)=>{var y;const l=c.items[h];(y=l.resolve)==null||y.call(l,f),l.batch=null,l.reject=null,l.resolve=null},{promise:g,cancel:m}=t.fetch(c.items.map(h=>h.key),d);c.cancel=m,g.then(h=>{var f;for(let l=0;l<h.length;l++){const y=h[l];d(l,y)}for(const l of c.items)(f=l.reject)==null||f.call(l,new Error("Missing result")),l.batch=null}).catch(h=>{var f;for(const l of c.items)(f=l.reject)==null||f.call(l,h),l.batch=null})}}function u(a){const o={aborted:!1,key:a,batch:null,resolve:he,reject:he},c=new Promise((g,m)=>{o.reject=m,o.resolve=g,e||(e=[]),e.push(o)});return r||(r=setTimeout(i)),{promise:c,cancel:()=>{var g;o.aborted=!0,(g=o.batch)!=null&&g.items.every(m=>m.aborted)&&(o.batch.cancel(),o.batch=null)}}}return{load:u}}function Zr(t){return function(r){const n=_r(r),s=r.maxURLLength??1/0;return i=>{const u=g=>{const m=f=>{if(s===1/0)return!0;const l=f.map(P=>P.path).join(","),y=f.map(P=>P.input);return qt({...n,runtime:i,type:g,path:l,inputs:y}).length<=s},h=t({...n,runtime:i,type:g,opts:r});return{validate:m,fetch:h}},a=de(u("query")),o=de(u("mutation")),c=de(u("subscription")),d={query:a,subscription:c,mutation:o};return({op:g})=>wt(m=>{const h=d[g.type],{promise:f,cancel:l}=h.load(g);let y;return f.then(p=>{y=p;const P=Nr(p.json,i);if(!P.ok){m.error(M.from(P.error,{meta:p.meta}));return}m.next({context:p.meta,result:P.result}),m.complete()}).catch(p=>{m.error(M.from(p,{meta:y==null?void 0:y.meta}))}),()=>{l()}})}}}const Xr=t=>e=>{const r=e.map(u=>u.path).join(","),n=e.map(u=>u.input),{promise:s,cancel:i}=Gr({...t,path:r,inputs:n,headers(){return t.opts.headers?typeof t.opts.headers=="function"?t.opts.headers({opList:e}):t.opts.headers:{}}});return{promise:s.then(u=>(Array.isArray(u.json)?u.json:e.map(()=>u.json)).map(c=>({meta:u.meta,json:c}))),cancel:i}},Jr=Zr(Xr);class en{$request({type:e,input:r,path:n,context:s={}}){return Ar({links:this.links,op:{id:++this.requestId,type:e,path:n,input:r,context:s}}).pipe(Dr())}requestAsPromise(e){const r=this.$request(e),{promise:n,abort:s}=Mr(r);return new Promise((u,a)=>{var o;(o=e.signal)==null||o.addEventListener("abort",s),n.then(c=>{u(c.result.data)}).catch(c=>{a(M.from(c))})})}query(e,r,n){return this.requestAsPromise({type:"query",path:e,input:r,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}mutation(e,r,n){return this.requestAsPromise({type:"mutation",path:e,input:r,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}subscription(e,r,n){return this.$request({type:"subscription",path:e,input:r,context:n==null?void 0:n.context}).subscribe({next(i){var u,a,o;i.result.type==="started"?(u=n.onStarted)==null||u.call(n):i.result.type==="stopped"?(a=n.onStopped)==null||a.call(n):(o=n.onData)==null||o.call(n,i.result.data)},error(i){var u;(u=n.onError)==null||u.call(n,i)},complete(){var i;(i=n.onComplete)==null||i.call(n)}})}constructor(e){this.requestId=0;const r=(()=>{const n=e.transformer;return n?"input"in n?e.transformer:{input:n,output:n}:{input:{serialize:s=>s,deserialize:s=>s},output:{serialize:s=>s,deserialize:s=>s}}})();this.runtime={transformer:{serialize:n=>r.input.serialize(n),deserialize:n=>r.output.deserialize(n)},combinedTransformer:r},this.links=e.links.map(n=>n(this.runtime))}}function tn(t){return new en(t)}const rn={query:"query",mutate:"mutation",subscribe:"subscription"},nn=t=>rn[t];function sn(t){return Ae(e=>t.hasOwnProperty(e)?t[e]:e==="__untypedClient"?t:ae(({path:r,args:n})=>{const s=[e,...r],i=nn(s.pop()),u=s.join(".");return t[i](u,...n)}))}class un{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,r){this.keyToValue.set(e,r),this.valueToKey.set(r,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class xt{constructor(e){this.generateIdentifier=e,this.kv=new un}register(e,r){this.kv.getByValue(e)||(r||(r=this.generateIdentifier(e)),this.kv.set(r,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class on extends xt{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(e,r.allowProps),super.register(e,r.identifier)):super.register(e,r)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function an(t){if("values"in Object)return Object.values(t);const e=[];for(const r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}function cn(t,e){const r=an(t);if("find"in r)return r.find(e);const n=r;for(let s=0;s<n.length;s++){const i=n[s];if(e(i))return i}}function _(t,e){Object.entries(t).forEach(([r,n])=>e(n,r))}function J(t,e){return t.indexOf(e)!==-1}function Ge(t,e){for(let r=0;r<t.length;r++){const n=t[r];if(e(n))return n}}class ln{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return cn(this.transfomers,r=>r.isApplicable(e))}findByName(e){return this.transfomers[e]}}const fn=t=>Object.prototype.toString.call(t).slice(8,-1),Tt=t=>typeof t>"u",hn=t=>t===null,G=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,Pe=t=>G(t)&&Object.keys(t).length===0,K=t=>Array.isArray(t),dn=t=>typeof t=="string",yn=t=>typeof t=="number"&&!isNaN(t),pn=t=>typeof t=="boolean",mn=t=>t instanceof RegExp,W=t=>t instanceof Map,Y=t=>t instanceof Set,It=t=>fn(t)==="Symbol",bn=t=>t instanceof Date&&!isNaN(t.valueOf()),vn=t=>t instanceof Error,We=t=>typeof t=="number"&&isNaN(t),gn=t=>pn(t)||hn(t)||Tt(t)||yn(t)||dn(t)||It(t),Rn=t=>typeof t=="bigint",On=t=>t===1/0||t===-1/0,wn=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),Cn=t=>t instanceof URL,Dt=t=>t.replace(/\./g,"\\."),ye=t=>t.map(String).map(Dt).join("."),V=t=>{const e=[];let r="";for(let s=0;s<t.length;s++){let i=t.charAt(s);if(i==="\\"&&t.charAt(s+1)==="."){r+=".",s++;continue}if(i==="."){e.push(r),r="";continue}r+=i}const n=r;return e.push(n),e};function D(t,e,r,n){return{isApplicable:t,annotation:e,transform:r,untransform:n}}const Mt=[D(Tt,"undefined",()=>null,()=>{}),D(Rn,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),D(bn,"Date",t=>t.toISOString(),t=>new Date(t)),D(vn,"Error",(t,e)=>{const r={name:t.name,message:t.message};return e.allowedErrorProps.forEach(n=>{r[n]=t[n]}),r},(t,e)=>{const r=new Error(t.message);return r.name=t.name,r.stack=t.stack,e.allowedErrorProps.forEach(n=>{r[n]=t[n]}),r}),D(mn,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}),D(Y,"set",t=>[...t.values()],t=>new Set(t)),D(W,"map",t=>[...t.entries()],t=>new Map(t)),D(t=>We(t)||On(t),"number",t=>We(t)?"NaN":t>0?"Infinity":"-Infinity",Number),D(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),D(Cn,"URL",t=>t.toString(),t=>new URL(t))];function ce(t,e,r,n){return{isApplicable:t,annotation:e,transform:r,untransform:n}}const At=ce((t,e)=>It(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,r)=>{const n=r.symbolRegistry.getValue(e[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),Pn=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),Ft=ce(wn,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const r=Pn[e[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(t)});function Ut(t,e){return t!=null&&t.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const kt=ce(Ut,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const r=e.classRegistry.getAllowedProps(t.constructor);if(!r)return{...t};const n={};return r.forEach(s=>{n[s]=t[s]}),n},(t,e,r)=>{const n=r.classRegistry.getValue(e[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),t)}),Kt=ce((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,r)=>{const n=r.customTransformerRegistry.findByName(e[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(t)}),En=[kt,At,Kt,Ft],Ye=(t,e)=>{const r=Ge(En,s=>s.isApplicable(t,e));if(r)return{value:r.transform(t,e),type:r.annotation(t,e)};const n=Ge(Mt,s=>s.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation}},Nt={};Mt.forEach(t=>{Nt[t.annotation]=t});const Sn=(t,e,r)=>{if(K(e))switch(e[0]){case"symbol":return At.untransform(t,e,r);case"class":return kt.untransform(t,e,r);case"custom":return Kt.untransform(t,e,r);case"typed-array":return Ft.untransform(t,e,r);default:throw new Error("Unknown transformation: "+e)}else{const n=Nt[e];if(!n)throw new Error("Unknown transformation: "+e);return n.untransform(t,r)}},B=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const r=t.keys();for(;e>0;)r.next(),e--;return r.next().value};function Lt(t){if(J(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(J(t,"prototype"))throw new Error("prototype is not allowed as a property");if(J(t,"constructor"))throw new Error("constructor is not allowed as a property")}const Qn=(t,e)=>{Lt(e);for(let r=0;r<e.length;r++){const n=e[r];if(Y(t))t=B(t,+n);else if(W(t)){const s=+n,i=+e[++r]==0?"key":"value",u=B(t,s);switch(i){case"key":t=u;break;case"value":t=t.get(u);break}}else t=t[n]}return t},Ee=(t,e,r)=>{if(Lt(e),e.length===0)return r(t);let n=t;for(let i=0;i<e.length-1;i++){const u=e[i];if(K(n)){const a=+u;n=n[a]}else if(G(n))n=n[u];else if(Y(n)){const a=+u;n=B(n,a)}else if(W(n)){if(i===e.length-2)break;const o=+u,c=+e[++i]==0?"key":"value",d=B(n,o);switch(c){case"key":n=d;break;case"value":n=n.get(d);break}}}const s=e[e.length-1];if(K(n)?n[+s]=r(n[+s]):G(n)&&(n[s]=r(n[s])),Y(n)){const i=B(n,+s),u=r(i);i!==u&&(n.delete(i),n.add(u))}if(W(n)){const i=+e[e.length-2],u=B(n,i);switch(+s==0?"key":"value"){case"key":{const o=r(u);n.set(o,n.get(u)),o!==u&&n.delete(u);break}case"value":{n.set(u,r(n.get(u)));break}}}return t};function Se(t,e,r=[]){if(!t)return;if(!K(t)){_(t,(i,u)=>Se(i,e,[...r,...V(u)]));return}const[n,s]=t;s&&_(s,(i,u)=>{Se(i,e,[...r,...V(u)])}),e(n,r)}function qn(t,e,r){return Se(e,(n,s)=>{t=Ee(t,s,i=>Sn(i,n,r))}),t}function xn(t,e){function r(n,s){const i=Qn(t,V(s));n.map(V).forEach(u=>{t=Ee(t,u,()=>i)})}if(K(e)){const[n,s]=e;n.forEach(i=>{t=Ee(t,V(i),()=>t)}),s&&_(s,r)}else _(e,r);return t}const Tn=(t,e)=>G(t)||K(t)||W(t)||Y(t)||Ut(t,e);function In(t,e,r){const n=r.get(t);n?n.push(e):r.set(t,[e])}function Dn(t,e){const r={};let n;return t.forEach(s=>{if(s.length<=1)return;e||(s=s.map(a=>a.map(String)).sort((a,o)=>a.length-o.length));const[i,...u]=s;i.length===0?n=u.map(ye):r[ye(i)]=u.map(ye)}),n?Pe(r)?[n]:[n,r]:Pe(r)?void 0:r}const jt=(t,e,r,n,s=[],i=[],u=new Map)=>{const a=gn(t);if(!a){In(t,s,e);const h=u.get(t);if(h)return n?{transformedValue:null}:h}if(!Tn(t,r)){const h=Ye(t,r),f=h?{transformedValue:h.value,annotations:[h.type]}:{transformedValue:t};return a||u.set(t,f),f}if(J(i,t))return{transformedValue:null};const o=Ye(t,r),c=(o==null?void 0:o.value)??t,d=K(c)?[]:{},g={};_(c,(h,f)=>{if(f==="__proto__"||f==="constructor"||f==="prototype")throw new Error(`Detected property ${f}. This is a prototype pollution risk, please remove it from your object.`);const l=jt(h,e,r,n,[...s,f],[...i,t],u);d[f]=l.transformedValue,K(l.annotations)?g[f]=l.annotations:G(l.annotations)&&_(l.annotations,(y,p)=>{g[Dt(f)+"."+p]=y})});const m=Pe(g)?{transformedValue:d,annotations:o?[o.type]:void 0}:{transformedValue:d,annotations:o?[o.type,g]:g};return a||u.set(t,m),m};function Bt(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ze(t){return Bt(t)==="Array"}function Mn(t){if(Bt(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function An(t,e,r,n,s){const i={}.propertyIsEnumerable.call(n,e)?"enumerable":"nonenumerable";i==="enumerable"&&(t[e]=r),s&&i==="nonenumerable"&&Object.defineProperty(t,e,{value:r,enumerable:!1,writable:!0,configurable:!0})}function Qe(t,e={}){if(Ze(t))return t.map(s=>Qe(s,e));if(!Mn(t))return t;const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols(t);return[...r,...n].reduce((s,i)=>{if(Ze(e.props)&&!e.props.includes(i))return s;const u=t[i],a=Qe(u,e);return An(s,i,a,t,e.nonenumerable),s},{})}class S{constructor({dedupe:e=!1}={}){this.classRegistry=new on,this.symbolRegistry=new xt(r=>r.description??""),this.customTransformerRegistry=new ln,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const r=new Map,n=jt(e,r,this,this.dedupe),s={json:n.transformedValue};n.annotations&&(s.meta={...s.meta,values:n.annotations});const i=Dn(r,this.dedupe);return i&&(s.meta={...s.meta,referentialEqualities:i}),s}deserialize(e){const{json:r,meta:n}=e;let s=Qe(r);return n!=null&&n.values&&(s=qn(s,n.values,this)),n!=null&&n.referentialEqualities&&(s=xn(s,n.referentialEqualities)),s}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,r){this.classRegistry.register(e,r)}registerSymbol(e,r){this.symbolRegistry.register(e,r)}registerCustom(e,r){this.customTransformerRegistry.register({name:r,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}S.defaultInstance=new S;S.serialize=S.defaultInstance.serialize.bind(S.defaultInstance);S.deserialize=S.defaultInstance.deserialize.bind(S.defaultInstance);S.stringify=S.defaultInstance.stringify.bind(S.defaultInstance);S.parse=S.defaultInstance.parse.bind(S.defaultInstance);S.registerClass=S.defaultInstance.registerClass.bind(S.defaultInstance);S.registerSymbol=S.defaultInstance.registerSymbol.bind(S.defaultInstance);S.registerCustom=S.defaultInstance.registerCustom.bind(S.defaultInstance);S.allowErrorProps=S.defaultInstance.allowErrorProps.bind(S.defaultInstance);S.serialize;S.deserialize;S.stringify;S.parse;S.registerClass;S.registerCustom;S.registerSymbol;S.allowErrorProps;function x(t,e){const r=Array.isArray(t)?t:[t],[n,s]=r,i=typeof n!="string"||n===""?[]:n.split(".");return!s&&(!e||e==="any")?i.length?[i]:[]:[i,{...typeof s<"u"&&{input:s},...e&&e!=="any"&&{type:e}}]}function ie(t,e){return t.length?e===void 0?[t]:[t,e]:[]}function Fn(t,e){return ae(r=>{const n=r.args,s=[t,...r.path],i=s.pop(),u=s.join(".");if(i==="useMutation")return e[i](u,...n);const[a,...o]=n,c=ie(u,a);if(i==="getQueryKey")return x(c,o[0]??"any");if(i==="_def")return{path:s};if(i.startsWith("useSuspense")){const d=o[0]||{},m=e[i==="useSuspenseQuery"?"useQuery":"useInfiniteQuery"](c,{...d,suspense:!0,enabled:!0});return[m.data,m]}return e[i](c,...o)})}const Un=["client","ssrContext","ssrState","abortOnUnmount"],kn=C.createContext(null);function Kn(t){return Ae(e=>{const r=e;return r==="client"?sn(t.client):Un.includes(r)?t[r]:ae(({path:n,args:s})=>{const i=[e,...n],u=i.pop(),a=i.join("."),o=h=>{if(["setData","setInfiniteData"].includes(h)){const[p,P,...w]=s;return{queryKey:ie(a,p),updater:P,rest:w}}const[f,...l]=s;return{queryKey:ie(a,f),rest:l}},{queryKey:c,rest:d,updater:g}=o(u);return{fetch:()=>t.fetchQuery(c,...d),fetchInfinite:()=>t.fetchInfiniteQuery(c,...d),prefetch:()=>t.prefetchQuery(c,...d),prefetchInfinite:()=>t.prefetchInfiniteQuery(c,...d),ensureData:()=>t.ensureQueryData(c,...d),invalidate:()=>t.invalidateQueries(c,...d),reset:()=>t.resetQueries(c,...d),refetch:()=>t.refetchQueries(c,...d),cancel:()=>t.cancelQuery(c,...d),setData:()=>{t.setQueryData(c,g,...d)},setInfiniteData:()=>{t.setInfiniteQueryData(c,g,...d)},getData:()=>t.getQueryData(c),getInfiniteData:()=>t.getInfiniteQueryData(c)}[u]()})})}function Nn(t){return ae(e=>{const r=e.path.join("."),[n,s]=e.args;return{queryKey:ie(r,n),queryFn:()=>t.query(r,n,s==null?void 0:s.trpc),...s}})}function F(t,e){const[r,n]=t;return[r,n,e==null?void 0:e.trpc]}function pe(t){const{path:e}=t;return C.useMemo(()=>({path:e}),[e])}function Ln(t){const e=f=>f.originalFn(),r=kn,n=t==null?void 0:t.reactQueryContext,s=f=>tn(f),i=f=>{const{abortOnUnmount:l=!1,client:y,queryClient:p,ssrContext:P}=f,[w,E]=C.useState(f.ssrState??!1);return C.useEffect(()=>{E(O=>O?"mounted":!1)},[]),Fe.createElement(r.Provider,{value:{abortOnUnmount:l,queryClient:p,client:y,ssrContext:P??null,ssrState:w,fetchQuery:C.useCallback((O,b)=>p.fetchQuery({...b,queryKey:x(O,"query"),queryFn:()=>y.query(...F(O,b))}),[y,p]),fetchInfiniteQuery:C.useCallback((O,b)=>p.fetchInfiniteQuery({...b,queryKey:x(O,"infinite"),queryFn:({pageParam:v})=>{const[R,Q]=O,T={...Q,cursor:v};return y.query(...F([R,T],b))}}),[y,p]),prefetchQuery:C.useCallback((O,b)=>p.prefetchQuery({...b,queryKey:x(O,"query"),queryFn:()=>y.query(...F(O,b))}),[y,p]),prefetchInfiniteQuery:C.useCallback((O,b)=>p.prefetchInfiniteQuery({...b,queryKey:x(O,"infinite"),queryFn:({pageParam:v})=>{const[R,Q]=O,T={...Q,cursor:v};return y.query(...F([R,T],b))}}),[y,p]),ensureQueryData:C.useCallback((O,b)=>p.ensureQueryData({...b,queryKey:x(O,"query"),queryFn:()=>y.query(...F(O,b))}),[y,p]),invalidateQueries:C.useCallback((O,b,v)=>p.invalidateQueries({...b,queryKey:x(O,"any")},v),[p]),resetQueries:C.useCallback((...O)=>{const[b,v,R]=O;return p.resetQueries({...v,queryKey:x(b,"any")},R)},[p]),refetchQueries:C.useCallback((...O)=>{const[b,v,R]=O;return p.refetchQueries({...v,queryKey:x(b,"any")},R)},[p]),cancelQuery:C.useCallback(O=>p.cancelQueries({queryKey:x(O,"any")}),[p]),setQueryData:C.useCallback((...O)=>{const[b,...v]=O;return p.setQueryData(x(b,"query"),...v)},[p]),getQueryData:C.useCallback((...O)=>{const[b,...v]=O;return p.getQueryData(x(b,"query"),...v)},[p]),setInfiniteQueryData:C.useCallback((...O)=>{const[b,...v]=O;return p.setQueryData(x(b,"infinite"),...v)},[p]),getInfiniteQueryData:C.useCallback((...O)=>{const[b,...v]=O;return p.getQueryData(x(b,"infinite"),...v)},[p])}},f.children)};function u(){return Fe.useContext(r)}function a(f,l,y){var w;const{queryClient:p,ssrState:P}=u();return P&&P!=="mounted"&&((w=p.getQueryCache().find(x(f,l)))==null?void 0:w.state.status)==="error"?{retryOnMount:!1,...y}:y}function o(f,l){var T,A;const y=u();if(!y)throw new Error("Unable to retrieve application context. Did you forget to wrap your App inside `withTRPC` HoC?");const{abortOnUnmount:p,client:P,ssrState:w,queryClient:E,prefetchQuery:O}=y,b=E.getQueryDefaults(x(f,"query"));typeof window>"u"&&w==="prepass"&&((T=l==null?void 0:l.trpc)==null?void 0:T.ssr)!==!1&&((l==null?void 0:l.enabled)??(b==null?void 0:b.enabled))!==!1&&!E.getQueryCache().find(x(f,"query"))&&O(f,l);const v=a(f,"query",{...b,...l}),R=((A=l==null?void 0:l.trpc)==null?void 0:A.abortOnUnmount)??(t==null?void 0:t.abortOnUnmount)??p,Q=Sr({...v,queryKey:x(f,"query"),queryFn:z=>{const L={...v,trpc:{...v==null?void 0:v.trpc,...R?{signal:z.signal}:{}}};return P.query(...F(f,L))},context:n});return Q.trpc=pe({path:f[0]}),Q}function c(f,l){const{client:y}=u(),p=oe({context:n}),P=Array.isArray(f)?f[0]:f,w=p.getMutationDefaults([P.split(".")]),E=Qr({...l,mutationKey:[P.split(".")],mutationFn:O=>y.mutation(...F([P,O],l)),context:n,onSuccess(...O){return e({originalFn:()=>{var v,R;return((v=l==null?void 0:l.onSuccess)==null?void 0:v.call(l,...O))??((R=w==null?void 0:w.onSuccess)==null?void 0:R.call(w,...O))},queryClient:p,meta:(l==null?void 0:l.meta)??(w==null?void 0:w.meta)??{}})}});return E.trpc=pe({path:P}),E}/* istanbul ignore next -- @preserve */function d(f,l){const y=(l==null?void 0:l.enabled)??!0,p=k(f),{client:P}=u(),w=C.useRef(l);w.current=l,C.useEffect(()=>{if(!y)return;const[E,O]=f;let b=!1;const v=P.subscription(E,O??void 0,{onStarted:()=>{var R,Q;b||(Q=(R=w.current).onStarted)==null||Q.call(R)},onData:R=>{b||w.current.onData(R)},onError:R=>{var Q,T;b||(T=(Q=w.current).onError)==null||T.call(Q,R)}});return()=>{b=!0,v.unsubscribe()}},[p,y])}function g(f,l){var A,z;const[y,p]=f,{client:P,ssrState:w,prefetchInfiniteQuery:E,queryClient:O,abortOnUnmount:b}=u(),v=O.getQueryDefaults(x(f,"infinite"));typeof window>"u"&&w==="prepass"&&((A=l==null?void 0:l.trpc)==null?void 0:A.ssr)!==!1&&((l==null?void 0:l.enabled)??(v==null?void 0:v.enabled))!==!1&&!O.getQueryCache().find(x(f,"infinite"))&&E(f,{...v,...l});const R=a(f,"infinite",{...v,...l}),Q=((z=l==null?void 0:l.trpc)==null?void 0:z.abortOnUnmount)??b,T=xr({...R,queryKey:x(f,"infinite"),queryFn:L=>{const Ht={...R,trpc:{...R==null?void 0:R.trpc,...Q?{signal:L.signal}:{}}},_t={...p??{},cursor:L.pageParam??(l==null?void 0:l.initialCursor)};return P.query(...F([y,_t],Ht))},context:n});return T.trpc=pe({path:y}),T}return{Provider:i,createClient:s,useContext:u,useUtils:u,useQuery:o,useQueries:(f,l)=>{var b;const{ssrState:y,queryClient:p,prefetchQuery:P,client:w}=u(),E=Nn(w),O=f(E);if(typeof window>"u"&&y==="prepass")for(const v of O){const R=v;((b=R.trpc)==null?void 0:b.ssr)!==!1&&!p.getQueryCache().find(x(R.queryKey,"query"))&&P(R.queryKey,R)}return Er({queries:O.map(v=>({...v,queryKey:x(v.queryKey,"query")})),context:l})},useMutation:c,useSubscription:d,useDehydratedState:(f,l)=>C.useMemo(()=>l&&f.runtime.transformer.deserialize(l),[l,f]),useInfiniteQuery:g}}function jn(t){return Ln(t)}function Bn(t){return Ae(e=>e==="useContext"||e==="useUtils"?()=>{const r=t.useUtils();return C.useMemo(()=>Kn(r),[r])}:t.hasOwnProperty(e)?t[e]:Fn(e,t))}function Hn(t){const e=jn(t);return Bn(e)}function _n(t){return Hn(t)}const Xe=_n(),zn=S,Vn=({children:t})=>{const[e]=C.useState(()=>new ur({defaultOptions:{queries:{retry:!1},mutations:{retry:!1}}})),[r]=C.useState(()=>Xe.createClient({transformer:zn,links:[Jr({url:"/api/trpc"})]}));return Ue.jsx(Xe.Provider,{client:r,queryClient:e,children:Ue.jsx(wr,{client:e,children:t})})},Gn={Provider:Vn};export{Xe as A,Gn as T,Qr as u};
