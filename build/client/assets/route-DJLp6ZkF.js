import{r as a,j as o}from"./index-Bhhhx7h4.js";import{A as ee}from"./index-CWUlnviP.js";import{S as bt}from"./provider-RLEbTht8.js";import{u as St,U as yt}from"./index-q-G7H0tu.js";import{I as wt}from"./index-CH34cjkL.js";import{a as Nt}from"./index-CeUTncnb.js";import{F as $,I as Y}from"./index-C8qbBouM.js";import{P as qe}from"./index-C6x-598G.js";import{I as xt,_ as he,P as Ze,Q as et,f as O,aw as It,d as ge,a as Et,ax as $t,ak as ye,e as X,b as tt,ay as Ct,az as jt,ao as Rt,aA as je,A as Dt,aB as Ot,l as At,h as Ft,m as Mt,aC as Vt,aD as kt,r as Re,aE as nt,aF as Bt,aG as Tt,aH as _t,j as _,aI as Lt,aJ as Pt,aK as Ut,aL as Wt,ag as qt,C as Gt,a3 as zt,aM as Ht,aN as Kt,n as Xt,D as Qt,aO as Yt,aP as Ge,ae as ze,aQ as Jt,au as Zt,T as en,B as te}from"./index-C7Q2D2Yy.js";import{s as M}from"./index-BzyPBYP5.js";import{S as tn}from"./index-CY1kBE-P.js";import{R as nn}from"./Pagination-D2AnF2UC.js";import{L as He}from"./index-D28acUWU.js";import{S as Ke}from"./index-DqVK0OKb.js";import{F as rn}from"./Table-D46c5F71.js";import{M as be}from"./index-CzA3G1Dw.js";import"./collapse-BbEVqHco.js";import"./fade-BYpxbwFh.js";import"./useBreakpoint-CiMsAa-F.js";import"./responsiveObserver-CzlRrsiN.js";import"./DeleteOutlined-CXav3FED.js";import"./SearchOutlined-ADv_U9mc.js";import"./row-B-zWIMNx.js";import"./EllipsisOutlined-Bce2vzrs.js";import"./index-LQraNpB7.js";import"./Dropdown-EsR9A278.js";import"./index-B0p7av3r.js";import"./useClosable-Bdp6jF3W.js";var an={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},sn=function(t,n){return a.createElement(xt,he({},t,{ref:n,icon:an}))},on=a.forwardRef(sn);function Oe(){return typeof BigInt=="function"}function rt(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function re(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var r=t||"0",i=r.split("."),s=i[0]||"0",S=i[1]||"0";s==="0"&&S==="0"&&(n=!1);var m=n?"-":"";return{negative:n,negativeStr:m,trimStr:r,integerStr:s,decimalStr:S,fullStr:"".concat(m).concat(r)}}function Fe(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function ne(e){var t=String(e);if(Fe(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return r!=null&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&Me(t)?t.length-t.indexOf(".")-1:0}function we(e){var t=String(e);if(Fe(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Oe()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Oe()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(ne(t))}return re(t).fullStr}function Me(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var ln=function(){function e(t){if(et(this,e),O(this,"origin",""),O(this,"negative",void 0),O(this,"integer",void 0),O(this,"decimal",void 0),O(this,"decimalLen",void 0),O(this,"empty",void 0),O(this,"nan",void 0),rt(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var n=t;if(Fe(n)&&(n=Number(n)),n=typeof n=="string"?n:we(n),Me(n)){var r=re(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var s=i[1]||"0";this.decimal=BigInt(s),this.decimalLen=s.length}else this.nan=!0}return Ze(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(n){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0"));return BigInt(r)}},{key:"negate",value:function(){var n=new e(this.toString());return n.negative=!n.negative,n}},{key:"cal",value:function(n,r,i){var s=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),S=this.alignDecimal(s),m=n.alignDecimal(s),g=r(S,m).toString(),h=i(s),d=re(g),N=d.negativeStr,I=d.trimStr,w="".concat(N).concat(I.padStart(h+1,"0"));return new e("".concat(w.slice(0,-h),".").concat(w.slice(-h)))}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var r=new e(n);return r.isInvalidate()?this:this.cal(r,function(i,s){return i+s},function(i){return i})}},{key:"multi",value:function(n){var r=new e(n);return this.isInvalidate()||r.isInvalidate()?new e(NaN):this.cal(r,function(i,s){return i*s},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toString()===(n==null?void 0:n.toString())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":re("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),un=function(){function e(t){if(et(this,e),O(this,"origin",""),O(this,"number",void 0),O(this,"empty",void 0),rt(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return Ze(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var r=Number(n);if(Number.isNaN(r))return this;var i=this.number+r;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var s=Math.max(ne(this.number),ne(r));return new e(i.toFixed(s))}},{key:"multi",value:function(n){var r=Number(n);if(this.isInvalidate()||Number.isNaN(r))return new e(NaN);var i=this.number*r;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var s=Math.max(ne(this.number),ne(r));return new e(i.toFixed(s))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toNumber()===(n==null?void 0:n.toNumber())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":we(this.number):this.origin}}]),e}();function q(e){return Oe()?new ln(e):new un(e)}function Se(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var i=re(e),s=i.negativeStr,S=i.integerStr,m=i.decimalStr,g="".concat(t).concat(m),h="".concat(s).concat(S);if(n>=0){var d=Number(m[n]);if(d>=5&&!r){var N=q(e).add("".concat(s,"0.").concat("0".repeat(n)).concat(10-d));return Se(N.toString(),t,n,r)}return n===0?h:"".concat(h).concat(t).concat(m.padEnd(n,"0").slice(0,n))}return g===".0"?h:"".concat(h).concat(g)}function cn(e,t){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(r,i){if(t[i])return t[i];var s=r[i];return typeof s=="function"?s.bind(r):s}}):e}function dn(e,t){var n=a.useRef(null);function r(){try{var s=e.selectionStart,S=e.selectionEnd,m=e.value,g=m.substring(0,s),h=m.substring(S);n.current={start:s,end:S,value:m,beforeTxt:g,afterTxt:h}}catch{}}function i(){if(e&&n.current&&t)try{var s=e.value,S=n.current,m=S.beforeTxt,g=S.afterTxt,h=S.start,d=s.length;if(s.startsWith(m))d=m.length;else if(s.endsWith(g))d=s.length-n.current.afterTxt.length;else{var N=m[h-1],I=s.indexOf(N,h-1);I!==-1&&(d=I+1)}e.setSelectionRange(d,d)}catch(w){It(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(w.message))}}return[r,i]}var fn=function(){var t=a.useState(!1),n=ge(t,2),r=n[0],i=n[1];return Et(function(){i($t())},[]),r},mn=200,pn=600;function gn(e){var t=e.prefixCls,n=e.upNode,r=e.downNode,i=e.upDisabled,s=e.downDisabled,S=e.onStep,m=a.useRef(),g=a.useRef([]),h=a.useRef();h.current=S;var d=function(){clearTimeout(m.current)},N=function(R,c){R.preventDefault(),d(),h.current(c);function F(){h.current(c),m.current=setTimeout(F,mn)}m.current=setTimeout(F,pn)};a.useEffect(function(){return function(){d(),g.current.forEach(function(j){return ye.cancel(j)})}},[]);var I=fn();if(I)return null;var w="".concat(t,"-handler"),V=X(w,"".concat(w,"-up"),O({},"".concat(w,"-up-disabled"),i)),C=X(w,"".concat(w,"-down"),O({},"".concat(w,"-down-disabled"),s)),A=function(){return g.current.push(ye(d))},E={unselectable:"on",role:"button",onMouseUp:A,onMouseLeave:A};return a.createElement("div",{className:"".concat(w,"-wrap")},a.createElement("span",he({},E,{onMouseDown:function(R){N(R,!0)},"aria-label":"Increase Value","aria-disabled":i,className:V}),n||a.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),a.createElement("span",he({},E,{onMouseDown:function(R){N(R,!1)},"aria-label":"Decrease Value","aria-disabled":s,className:C}),r||a.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Xe(e){var t=typeof e=="number"?we(e):re(e).fullStr,n=t.includes(".");return n?re(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const hn=function(){var e=a.useRef(0),t=function(){ye.cancel(e.current)};return a.useEffect(function(){return t},[]),function(n){t(),e.current=ye(function(){n()})}};var vn=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],bn=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Qe=function(t,n){return t||n.isEmpty()?n.toString():n.toNumber()},Ye=function(t){var n=q(t);return n.isInvalidate()?null:n},Sn=a.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,i=e.style,s=e.min,S=e.max,m=e.step,g=m===void 0?1:m,h=e.defaultValue,d=e.value,N=e.disabled,I=e.readOnly,w=e.upHandler,V=e.downHandler,C=e.keyboard,A=e.changeOnWheel,E=A===void 0?!1:A,j=e.controls,R=j===void 0?!0:j;e.classNames;var c=e.stringMode,F=e.parser,T=e.formatter,v=e.precision,k=e.decimalSeparator,B=e.onChange,L=e.onInput,P=e.onPressEnter,U=e.onStep,W=e.changeOnBlur,J=W===void 0?!0:W,ce=e.domRef,de=tt(e,vn),ae="".concat(n,"-input"),G=a.useRef(null),z=a.useState(!1),ie=ge(z,2),Z=ie[0],b=ie[1],p=a.useRef(!1),D=a.useRef(!1),Q=a.useRef(!1),se=a.useState(function(){return q(d??h)}),K=ge(se,2),x=K[0],oe=K[1];function it(u){d===void 0&&oe(u)}var Ne=a.useCallback(function(u,l){if(!l)return v>=0?v:Math.max(ne(u),ne(g))},[v,g]),xe=a.useCallback(function(u){var l=String(u);if(F)return F(l);var y=l;return k&&(y=y.replace(k,".")),y.replace(/[^\w.-]+/g,"")},[F,k]),Ie=a.useRef(""),Ve=a.useCallback(function(u,l){if(T)return T(u,{userTyping:l,input:String(Ie.current)});var y=typeof u=="number"?we(u):u;if(!l){var f=Ne(y,l);if(Me(y)&&(k||f>=0)){var H=k||".";y=Se(y,H,f)}}return y},[T,Ne,k]),st=a.useState(function(){var u=h??d;return x.isInvalidate()&&["string","number"].includes(Rt(u))?Number.isNaN(u)?"":u:Ve(x.toString(),!1)}),ke=ge(st,2),fe=ke[0],Be=ke[1];Ie.current=fe;function me(u,l){Be(Ve(u.isInvalidate()?u.toString(!1):u.toString(!l),l))}var le=a.useMemo(function(){return Ye(S)},[S,v]),ue=a.useMemo(function(){return Ye(s)},[s,v]),Te=a.useMemo(function(){return!le||!x||x.isInvalidate()?!1:le.lessEquals(x)},[le,x]),_e=a.useMemo(function(){return!ue||!x||x.isInvalidate()?!1:x.lessEquals(ue)},[ue,x]),ot=dn(G.current,Z),Le=ge(ot,2),lt=Le[0],ut=Le[1],Pe=function(l){return le&&!l.lessEquals(le)?le:ue&&!ue.lessEquals(l)?ue:null},Ee=function(l){return!Pe(l)},ve=function(l,y){var f=l,H=Ee(f)||f.isEmpty();if(!f.isEmpty()&&!y&&(f=Pe(f)||f,H=!0),!I&&!N&&H){var pe=f.toString(),Ce=Ne(pe,y);return Ce>=0&&(f=q(Se(pe,".",Ce)),Ee(f)||(f=q(Se(pe,".",Ce,!0)))),f.equals(x)||(it(f),B==null||B(f.isEmpty()?null:Qe(c,f)),d===void 0&&me(f,y)),f}return x},ct=hn(),Ue=function u(l){if(lt(),Ie.current=l,Be(l),!D.current){var y=xe(l),f=q(y);f.isNaN()||ve(f,!0)}L==null||L(l),ct(function(){var H=l;F||(H=l.replace(/。/g,".")),H!==l&&u(H)})},dt=function(){D.current=!0},ft=function(){D.current=!1,Ue(G.current.value)},mt=function(l){Ue(l.target.value)},$e=function(l){var y;if(!(l&&Te||!l&&_e)){p.current=!1;var f=q(Q.current?Xe(g):g);l||(f=f.negate());var H=(x||q(0)).add(f.toString()),pe=ve(H,!1);U==null||U(Qe(c,pe),{offset:Q.current?Xe(g):g,type:l?"up":"down"}),(y=G.current)===null||y===void 0||y.focus()}},We=function(l){var y=q(xe(fe)),f;y.isNaN()?f=ve(x,l):f=ve(y,l),d!==void 0?me(x,!1):f.isNaN()||me(f,!1)},pt=function(){p.current=!0},gt=function(l){var y=l.key,f=l.shiftKey;p.current=!0,Q.current=f,y==="Enter"&&(D.current||(p.current=!1),We(!1),P==null||P(l)),C!==!1&&!D.current&&["Up","ArrowUp","Down","ArrowDown"].includes(y)&&($e(y==="Up"||y==="ArrowUp"),l.preventDefault())},ht=function(){p.current=!1,Q.current=!1};a.useEffect(function(){if(E&&Z){var u=function(f){$e(f.deltaY<0),f.preventDefault()},l=G.current;if(l)return l.addEventListener("wheel",u,{passive:!1}),function(){return l.removeEventListener("wheel",u)}}});var vt=function(){J&&We(!1),b(!1),p.current=!1};return je(function(){x.isInvalidate()||me(x,!1)},[v,T]),je(function(){var u=q(d);oe(u);var l=q(xe(fe));(!u.equals(l)||!p.current||T)&&me(u,p.current)},[d]),je(function(){T&&ut()},[fe]),a.createElement("div",{ref:ce,className:X(n,r,O(O(O(O(O({},"".concat(n,"-focused"),Z),"".concat(n,"-disabled"),N),"".concat(n,"-readonly"),I),"".concat(n,"-not-a-number"),x.isNaN()),"".concat(n,"-out-of-range"),!x.isInvalidate()&&!Ee(x))),style:i,onFocus:function(){b(!0)},onBlur:vt,onKeyDown:gt,onKeyUp:ht,onCompositionStart:dt,onCompositionEnd:ft,onBeforeInput:pt},R&&a.createElement(gn,{prefixCls:n,upNode:w,downNode:V,upDisabled:Te,downDisabled:_e,onStep:$e}),a.createElement("div",{className:"".concat(ae,"-wrap")},a.createElement("input",he({autoComplete:"off",role:"spinbutton","aria-valuemin":s,"aria-valuemax":S,"aria-valuenow":x.isInvalidate()?null:x.toString(),step:g},de,{ref:Dt(G,t),className:ae,value:fe,onChange:mt,disabled:N,readOnly:I}))))}),yn=a.forwardRef(function(e,t){var n=e.disabled,r=e.style,i=e.prefixCls,s=i===void 0?"rc-input-number":i,S=e.value,m=e.prefix,g=e.suffix,h=e.addonBefore,d=e.addonAfter,N=e.className,I=e.classNames,w=tt(e,bn),V=a.useRef(null),C=a.useRef(null),A=a.useRef(null),E=function(R){A.current&&jt(A.current,R)};return a.useImperativeHandle(t,function(){return cn(A.current,{nativeElement:V.current.nativeElement||C.current})}),a.createElement(Ct,{className:N,triggerFocus:E,prefixCls:s,value:S,disabled:n,style:r,prefix:m,suffix:g,addonAfter:d,addonBefore:h,classNames:I,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:V},a.createElement(Sn,he({prefixCls:s,disabled:n,ref:A,domRef:C,className:I==null?void 0:I.input},w)))});const wn=e=>{var t;const n=(t=e.handleVisible)!==null&&t!==void 0?t:"auto";return Object.assign(Object.assign({},Ot(e)),{controlWidth:90,handleWidth:e.controlHeightSM-e.lineWidth*2,handleFontSize:e.fontSize/2,handleVisible:n,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new At(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:n===!0?1:0})},Je=(e,t)=>{let{componentCls:n,borderRadiusSM:r,borderRadiusLG:i}=e;const s=t==="lg"?i:r;return{[`&-${t}`]:{[`${n}-handler-wrap`]:{borderStartEndRadius:s,borderEndEndRadius:s},[`${n}-handler-up`]:{borderStartEndRadius:s},[`${n}-handler-down`]:{borderEndEndRadius:s}}}},Nn=e=>{const{componentCls:t,lineWidth:n,lineType:r,borderRadius:i,inputFontSizeSM:s,inputFontSizeLG:S,controlHeightLG:m,controlHeightSM:g,colorError:h,paddingInlineSM:d,paddingBlockSM:N,paddingBlockLG:I,paddingInlineLG:w,colorTextDescription:V,motionDurationMid:C,handleHoverColor:A,handleOpacity:E,paddingInline:j,paddingBlock:R,handleBg:c,handleActiveBg:F,colorTextDisabled:T,borderRadiusSM:v,borderRadiusLG:k,controlWidth:B,handleBorderColor:L,filledHandleBg:P,lineHeightLG:U,calc:W}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Re(e)),nt(e)),{display:"inline-block",width:B,margin:0,padding:0,borderRadius:i}),Bt(e,{[`${t}-handler-wrap`]:{background:c,[`${t}-handler-down`]:{borderBlockStart:`${_(n)} ${r} ${L}`}}})),Tt(e,{[`${t}-handler-wrap`]:{background:P,[`${t}-handler-down`]:{borderBlockStart:`${_(n)} ${r} ${L}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:c}}})),_t(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:S,lineHeight:U,borderRadius:k,[`input${t}-input`]:{height:W(m).sub(W(n).mul(2)).equal(),padding:`${_(I)} ${_(w)}`}},"&-sm":{padding:0,fontSize:s,borderRadius:v,[`input${t}-input`]:{height:W(g).sub(W(n).mul(2)).equal(),padding:`${_(N)} ${_(d)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:h}}},"&-group":Object.assign(Object.assign(Object.assign({},Re(e)),Pt(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:k,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:v}}},Ut(e)),Wt(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Re(e)),{width:"100%",padding:`${_(R)} ${_(j)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${C} linear`,appearance:"textfield",fontSize:"inherit"}),Lt(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:0,opacity:E,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${C}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:V,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${_(n)} ${r} ${L}`,transition:`all ${C} linear`,"&:active":{background:F},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:A}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},qt()),{color:V,transition:`all ${C} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}},Je(e,"lg")),Je(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:T}})}]},xn=e=>{const{componentCls:t,paddingBlock:n,paddingInline:r,inputAffixPadding:i,controlWidth:s,borderRadiusLG:S,borderRadiusSM:m,paddingInlineLG:g,paddingInlineSM:h,paddingBlockLG:d,paddingBlockSM:N,motionDurationMid:I}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${_(n)} 0`}},nt(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:s,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:S,paddingInlineStart:g,[`input${t}-input`]:{padding:`${_(d)} 0`}},"&-sm":{borderRadius:m,paddingInlineStart:h,[`input${t}-input`]:{padding:`${_(N)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:i,transition:`margin ${I}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(r).equal()}})}},In=Ft("InputNumber",e=>{const t=Mt(e,Vt(e));return[Nn(t),xn(t),kt(t)]},wn,{unitless:{handleOpacity:!0}});var En=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const at=a.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=a.useContext(Gt),i=a.useRef(null);a.useImperativeHandle(t,()=>i.current);const{className:s,rootClassName:S,size:m,disabled:g,prefixCls:h,addonBefore:d,addonAfter:N,prefix:I,suffix:w,bordered:V,readOnly:C,status:A,controls:E,variant:j}=e,R=En(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),c=n("input-number",h),F=zt(c),[T,v,k]=In(c,F),{compactSize:B,compactItemClassnames:L}=Ht(c,r);let P=a.createElement(on,{className:`${c}-handler-up-inner`}),U=a.createElement(nn,{className:`${c}-handler-down-inner`});const W=typeof E=="boolean"?E:void 0;typeof E=="object"&&(P=typeof E.upIcon>"u"?P:a.createElement("span",{className:`${c}-handler-up-inner`},E.upIcon),U=typeof E.downIcon>"u"?U:a.createElement("span",{className:`${c}-handler-down-inner`},E.downIcon));const{hasFeedback:J,status:ce,isFormItemInput:de,feedbackIcon:ae}=a.useContext(Kt),G=Jt(ce,A),z=Xt(x=>{var oe;return(oe=m??B)!==null&&oe!==void 0?oe:x}),ie=a.useContext(Qt),Z=g??ie,[b,p]=Yt("inputNumber",j,V),D=J&&a.createElement(a.Fragment,null,ae),Q=X({[`${c}-lg`]:z==="large",[`${c}-sm`]:z==="small",[`${c}-rtl`]:r==="rtl",[`${c}-in-form-item`]:de},v),se=`${c}-group`,K=a.createElement(yn,Object.assign({ref:i,disabled:Z,className:X(k,F,s,S,L),upHandler:P,downHandler:U,prefixCls:c,readOnly:C,controls:W,prefix:I,suffix:D||w,addonBefore:d&&a.createElement(ze,{form:!0,space:!0},d),addonAfter:N&&a.createElement(ze,{form:!0,space:!0},N),classNames:{input:Q,variant:X({[`${c}-${b}`]:p},Ge(c,G,J)),affixWrapper:X({[`${c}-affix-wrapper-sm`]:z==="small",[`${c}-affix-wrapper-lg`]:z==="large",[`${c}-affix-wrapper-rtl`]:r==="rtl",[`${c}-affix-wrapper-without-controls`]:E===!1},v),wrapper:X({[`${se}-rtl`]:r==="rtl"},v),groupWrapper:X({[`${c}-group-wrapper-sm`]:z==="small",[`${c}-group-wrapper-lg`]:z==="large",[`${c}-group-wrapper-rtl`]:r==="rtl",[`${c}-group-wrapper-${b}`]:p},Ge(`${c}-group-wrapper`,G,J),v)}},R));return T(K)}),Ae=at,$n=e=>a.createElement(Zt,{theme:{components:{InputNumber:{handleVisible:!0}}}},a.createElement(at,Object.assign({},e)));Ae._InternalPanelDoNotUseOrYouWillBeFired=$n;const{Title:De}=en;function tr(){const{courseId:e}=Nt(),[t]=$.useForm(),[n]=$.useForm(),[r]=$.useForm(),[i,s]=a.useState(!1),[S,m]=a.useState(),[g,h]=a.useState(null),[d,N]=a.useState(!1),[I,w]=a.useState(null),[V,C]=a.useState(!1),[A,E]=a.useState(!1),[j,R]=a.useState(null),[c,F]=a.useState([]);a.useEffect(()=>{v!=null&&v.previewUrl&&F([{uid:"-1",name:"preview.png",status:"done",url:v.previewUrl}]);const p=(()=>{const D=document.createElement("script");return D.src="https://www.tiktok.com/embed.js",D.async=!0,document.body.appendChild(D),D})();return()=>{p&&document.body.removeChild(p)}},[]);const{mutateAsync:T}=St(),{data:v,isLoading:k,refetch:B}=ee.course.findUnique.useQuery({where:{id:e},include:{sections:{include:{videos:!0}}}}),{mutateAsync:L}=ee.course.update.useMutation(),{mutateAsync:P}=ee.section.create.useMutation(),{mutateAsync:U}=ee.video.create.useMutation(),{mutateAsync:W}=ee.video.update.useMutation(),{mutateAsync:J}=ee.video.delete.useMutation(),{mutateAsync:ce}=ee.section.delete.useMutation(),de=async b=>{try{let p=v.previewUrl;if(c.length>0&&c[0]instanceof File)try{const{url:K}=await T({file:c[0]});p=K}catch(K){console.error("Image upload error:",K),M.error("Failed to upload image: "+K.message);return}const{paymentLink:D,...Q}=b,se={...Q,previewUrl:p,paymentLink:D||null};console.log("Updating course with data:",se),await L({where:{id:e},data:se}),M.success("Course updated successfully"),B()}catch(p){console.error("Course update error:",p),M.error(`Failed to update course: ${p.message}`),M.error("Please check the form values and try again")}},ae=async b=>{try{await P({data:{...b,courseId:e}}),M.success("Section added successfully"),n.resetFields(),B()}catch{M.error("Failed to add section")}},G=b=>{h(b),r.setFieldsValue(b),s(!0)},z=async b=>{try{await J({where:{id:b}}),M.success("Video deleted successfully"),B()}catch(p){console.error("Delete video error:",p),M.error(`Failed to delete video: ${p.message}`)}},ie=async b=>{try{await ce({where:{id:b}}),M.success("Section deleted successfully"),B()}catch(p){console.error("Delete section error:",p),M.error(`Failed to delete section: ${p.message}`)}finally{w(null),C(!1),E(!1)}},Z=async b=>{N(!0);try{const p={title:b.title,description:b.description,embedLink:b.embedLink,order:b.order,sectionId:S};g?(await W({where:{id:g.id},data:p}),M.success("Video updated successfully")):(await U({data:p}),M.success("Video added successfully")),B()}catch(p){console.error("Video save error:",p),M.error(`Failed to save video: ${p.message}`)}finally{s(!1),h(null),r.resetFields(),N(!1)}};return k?o.jsx(qe,{children:o.jsx("div",{className:"flex justify-center items-center h-full",children:o.jsx(bt,{size:"large"})})}):o.jsx(qe,{children:o.jsxs("div",{className:"max-w-4xl mx-auto p-6 md:p-4 sm:p-2",children:[o.jsx(De,{level:2,children:"Edit Course"}),o.jsxs($,{form:t,layout:"vertical",initialValues:v,onFinish:de,className:"mb-8",children:[o.jsx($.Item,{name:"title",label:"Title",rules:[{required:!0}],className:"w-full",children:o.jsx(Y,{className:"w-full"})}),(v==null?void 0:v.previewUrl)&&o.jsx($.Item,{name:"previewUrl",label:"Current Preview Image",children:o.jsx(wt.Img,{src:v.previewUrl,isPretty:!0,styleWrapper:{position:"relative",maxWidth:"100%",height:"auto",aspectRatio:"16/9"},styleImg:{objectFit:"cover",objectPosition:"center",width:"100%",height:"100%"}})}),o.jsx($.Item,{name:"previewUrl",label:v!=null&&v.previewUrl?"Change Preview Image":"Preview Image",children:o.jsx(yt,{fileList:c,beforeUpload:b=>b.size/1024/1024<2?(F([b]),!1):(M.error("Image must be smaller than 2MB"),!1),onRemove:()=>F([]),maxCount:1,listType:"picture",children:c.length===0&&"+ Upload"})}),o.jsx($.Item,{name:"description",label:"Description",rules:[{required:!0}],className:"w-full",children:o.jsx(Y.TextArea,{className:"w-full"})}),o.jsx($.Item,{name:"price",label:"Price (XAF)",rules:[{required:!0}],className:"w-full",children:o.jsx(Y,{className:"w-full"})}),o.jsx($.Item,{name:"paymentLink",label:"Payment Link",className:"w-full",children:o.jsx(Y,{className:"w-full",placeholder:"Enter payment URL"})}),o.jsx($.Item,{name:"isPremium",label:"Premium Course",valuePropName:"checked",className:"w-full",children:o.jsx(tn,{})}),o.jsx(te,{type:"primary",htmlType:"submit",children:"Update Course"})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx(De,{level:3,children:"Sections"}),o.jsxs($,{form:n,layout:"vertical",onFinish:ae,children:[o.jsx($.Item,{name:"title",label:"Section Title",rules:[{required:!0}],className:"w-full",children:o.jsx(Y,{className:"w-full"})}),o.jsx($.Item,{name:"order",label:"Order",rules:[{required:!0}],className:"w-full",children:o.jsx(Ae,{min:1,className:"w-full"})}),o.jsx(te,{type:"primary",htmlType:"submit",children:"Add Section"})]})]}),o.jsx(He,{dataSource:v==null?void 0:v.sections,renderItem:b=>o.jsx(He.Item,{children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[o.jsx(De,{level:4,children:b.title}),o.jsxs(Ke,{gap:2,children:[o.jsx(te,{type:"primary",onClick:()=>{m(b.id),s(!0)},children:"Add Video"}),o.jsx(te,{danger:!0,onClick:()=>{w(b.id),C(!0)},children:"Delete Section"})]})]}),o.jsx(rn,{dataSource:b.videos,columns:[{title:"Title",dataIndex:"title",ellipsis:!0},{title:"Source",dataIndex:"embedLink",ellipsis:!0},{title:"Order",dataIndex:"order",ellipsis:!0},{title:"Actions",render:(p,D)=>o.jsxs(Ke,{children:[o.jsx(te,{onClick:()=>G(D),children:"Edit"}),o.jsx(te,{danger:!0,onClick:()=>R(D.id),children:"Delete"})]})}],pagination:!1,scroll:{x:!0},responsive:!0})]})})}),o.jsx(be,{title:g?"Edit Video":"Add Video",open:i,width:"100%",centered:!0,onCancel:()=>{s(!1),h(null),r.resetFields()},footer:null,children:o.jsxs($,{form:r,layout:"vertical",onFinish:Z,children:[o.jsx($.Item,{name:"title",label:"Title",rules:[{required:!0},{max:100,message:"Title cannot exceed 100 characters"}],children:o.jsx(Y,{})}),o.jsx($.Item,{name:"description",label:"Description",rules:[{required:!0},{max:500,message:"Description cannot exceed 500 characters"}],children:o.jsx(Y.TextArea,{})}),o.jsx($.Item,{name:"embedLink",label:"Embed Link",rules:[{required:!0,message:"Please input video link!"}],children:o.jsx(Y,{})}),o.jsx($.Item,{name:"order",label:"Order",rules:[{required:!0}],children:o.jsx(Ae,{min:1})}),o.jsxs(te,{type:"primary",htmlType:"submit",loading:d,children:[g?"Update":"Add"," Video"]})]})}),o.jsx(be,{title:"Delete Section",open:V,width:"100%",centered:!0,onOk:()=>{C(!1),E(!0)},onCancel:()=>{w(null),C(!1)},children:o.jsx("p",{children:"Are you sure you want to delete this section? All videos will be deleted."})}),o.jsx(be,{title:"Final Confirmation",open:A,width:"100%",centered:!0,onOk:()=>ie(I),onCancel:()=>{w(null),E(!1)},children:o.jsx("p",{children:"This action cannot be undone. Are you absolutely sure?"})}),o.jsx(be,{title:"Delete Video",open:!!j,width:"100%",centered:!0,onOk:()=>{z(j),R(null)},onCancel:()=>R(null),children:o.jsx("p",{children:"Are you sure you want to delete this video? This action cannot be undone."})})]})})}export{tr as default};
