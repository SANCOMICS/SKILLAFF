import{r as c,j as e}from"./index-Bhhhx7h4.js";import{U as y}from"./index-C7KOCkDY.js";import{A as j,T as p}from"./index-D9_lrgu6.js";import{A as v}from"./index-DoFAsXEz.js";import{u as I}from"./index-CeUTncnb.js";import{u as w}from"./index-DWrdUq8q.js";import{F as r,I as o}from"./index-IivWOIOz.js";import{F as a}from"./index-Bs36QOeU.js";import{B as u}from"./button-DgkAoqE2.js";import{s as F}from"./index-DaEJ5rVL.js";import"./index-DEJDlrjn.js";import"./pickAttrs-r0RFaJBP.js";import"./SearchOutlined-CdaQ9A1C.js";import"./collapse-BbEVqHco.js";import"./row-DHszOpHb.js";import"./responsiveObserver-Cz69L87y.js";import"./ExclamationCircleFilled-CiuxUjGk.js";import"./CloseOutlined-Dxm4jkL9.js";function W(){const n=I(),[i]=w(),[m]=r.useForm(),[d,l]=c.useState(!1),{mutateAsync:f}=j.authentication.register.useMutation();c.useEffect(()=>{var t;const s=(t=i.get("email"))==null?void 0:t.trim();y.isDefined(s)&&m.setFieldsValue({email:s})},[i]);const g=async s=>{l(!0);try{const t=i.get("tokenInvitation")??void 0,x=h(),b=await f({...s,password:x,tokenInvitation:t});F.success("Registration successful! Please check your email for verification."),n("/login")}catch(t){console.error("Could not sign up:",t),l(!1)}},h=()=>Math.random().toString(36).slice(-8);return e.jsx(a,{align:"center",justify:"center",vertical:!0,flex:1,children:e.jsxs(a,{vertical:!0,style:{width:"340px",paddingBottom:"50px",paddingTop:"50px"},gap:"middle",children:[e.jsx(v,{description:"Welcome!"}),e.jsxs(r,{form:m,onFinish:g,layout:"vertical",autoComplete:"off",requiredMark:!1,children:[e.jsx(r.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"}],children:e.jsx(o,{type:"email",placeholder:"Your email",autoComplete:"email"})}),e.jsx(r.Item,{name:"name",rules:[{required:!0,message:"Name is required"}],label:"Name",children:e.jsx(o,{placeholder:"Your name"})}),e.jsx(r.Item,{name:"password",style:{display:"none"},children:e.jsx(o,{type:"password"})}),e.jsx(r.Item,{children:e.jsx(u,{type:"primary",htmlType:"submit",loading:d,block:!0,children:"Register"})})]}),e.jsx(u,{ghost:!0,style:{border:"none"},onClick:()=>n("/login"),children:e.jsxs(a,{gap:"small",justify:"center",children:[e.jsx(p.Text,{type:"secondary",children:"Have an account?"})," ",e.jsx(p.Text,{children:"Sign in"})]})})]})})}export{W as default};
