import{r as a,j as e}from"./index-Bhhhx7h4.js";import{A as u}from"./index-CWUlnviP.js";import"./provider-RLEbTht8.js";import{T as m,B as h}from"./index-C7Q2D2Yy.js";import{P as x}from"./index-C6x-598G.js";import"./index-BzyPBYP5.js";import"./row-B-zWIMNx.js";import"./responsiveObserver-CzlRrsiN.js";const{Paragraph:f,Title:y,Link:k}=m,g=r=>{const i=/(https?:\/\/[^\s]+)/g;return r.split(i).map((o,c)=>o.match(i)?e.jsx(k,{href:o,target:"_blank",rel:"noopener noreferrer",onClick:l=>l.stopPropagation(),children:o},c):o)},w=r=>r.includes("youtube.com/watch?v=")||r.includes("youtu.be/"),b=r=>r.includes("tiktok.com");function U(){const r=t=>t.sort(()=>Math.random()-.5),{data:i}=u.skillFeedVideo.findMany.useQuery(),[o,c]=a.useState([]);a.useEffect(()=>{i&&c(r([...i]))},[i]);const[l,p]=a.useState({}),n=(t,s)=>{s==null||s.preventDefault(),p(d=>({...d,[t]:!d[t]}))};return a.useEffect(()=>{(()=>{const s=document.createElement("script");return s.src="https://www.tiktok.com/embed.js",s.async=!0,document.body.appendChild(s),()=>document.body.removeChild(s)})()},[]),e.jsx(x,{layout:"full-width",children:e.jsx("div",{className:"flex flex-col scroll-smooth snap-y snap-mandatory h-[90vh] overflow-y-scroll mx-[5px]",children:o==null?void 0:o.map(t=>e.jsxs("div",{className:"w-full h-[90vh] flex flex-col justify-center video-container snap-start snap-always",children:[w(t.link)?e.jsx("iframe",{src:t.link.replace(/(youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/,"youtube.com/embed/$2"),className:"w-full h-[60vh] mx-auto rounded-lg mt-2",width:"100%",height:"100%",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):b(t.link)?e.jsx("blockquote",{className:"tiktok-embed mx-auto",cite:t.link,"data-video-id":t.link.split("/").pop(),"data-section":"true",style:{width:"325px",height:"90vh"},children:e.jsx("section",{})}):e.jsx("div",{className:"text-center text-red-500",children:"Unsupported video format"}),e.jsxs("div",{className:"mt-2 mb-4 bg-gray-200 p-4 rounded-lg",children:[e.jsx(y,{level:4,children:t.title}),e.jsx(f,{ellipsis:l[t.id]?!1:{rows:2},onClick:()=>n(t.id),children:g(t.description)}),l[t.id]&&e.jsx(h,{type:"link",onClick:s=>n(t.id,s),style:{padding:0,marginTop:"8px"},children:"Read Less"})]})]},t.id))})})}export{U as default};
